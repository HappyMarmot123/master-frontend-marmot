# 디바운스와 스로틀링 (Debounce & Throttling)

## 📖 개요

**디바운스(Debounce)**와 **스로틀링(Throttling)**은 이벤트 핸들러의 실행 횟수를 제어하여 웹 애플리케이션의 성능을 최적화하는 핵심 기법입니다. 연속적으로 발생하는 이벤트를 효율적으로 관리하여 불필요한 연산을 줄이고, 사용자 경험을 향상시킵니다.

### 디바운스 (Debounce)란?

**디바운스**는 이벤트가 **마지막으로 발생한 시점**으로부터 일정 시간 동안 추가적인 이벤트가 발생하지 않았을 때, 한 번만 핸들러를 실행하는 방식입니다. ⏱️

**디바운스의 핵심 원리**:

- **지연 실행**: 이벤트 발생 후 지정된 시간만큼 대기
- **재설정**: 대기 중에 새로운 이벤트가 발생하면 타이머 재설정
- **최종 실행**: 마지막 이벤트 발생 후 지정된 시간이 지나면 한 번만 실행

**디바운스의 특징**:

- **연속 이벤트 그룹화**: 빠르게 연속 발생하는 이벤트를 하나의 그룹으로 처리
- **최종 결과만 처리**: 중간 과정은 무시하고 최종 상태만 반영
- **사용자 입력 최적화**: 타이핑, 검색 등에서 유용

### 스로틀링 (Throttling)이란?

**스로틀링**은 이벤트가 연속적으로 발생하더라도, **일정 시간 간격** 내에서는 **최대 한 번만** 핸들러를 실행하는 방식입니다. 🏃‍♂️

**스로틀링의 핵심 원리**:

- **주기적 실행**: 지정된 시간 간격마다 정기적으로 실행
- **실행 제한**: 간격 내 추가 이벤트는 무시
- **일정한 빈도**: 실행 빈도를 일정하게 유지

**스로틀링의 특징**:

- **빈도 제어**: 이벤트 발생 빈도를 일정한 수준으로 제한
- **실시간 반응**: 주기적으로 반응하여 실시간성 보장
- **성능 최적화**: 과도한 이벤트 처리를 방지

## 💡 디바운스 vs 스로틀링 비교

**디바운스** : **일시 정지를 기다립니다.** 마지막 이벤트 이후 일정 시간 동안 활동이 없을 때만 액션이 실행됩니다 . 대기 시간 내에 새로운 이벤트가 발생하면 타이머가 초기화됩니다. 이 액션은 맨 마지막에 한 번만 실행됩니다.

- **비유** : 10초 후에 문이 닫히는 엘리베이터를 생각해 보세요. 새로운 사람이 들어오면 타이머는 10초로 재설정됩니다. 문은 10초 동안 아무도 들어오지 않을 때만 닫힙니다. 예를 들어, 공격 버튼을 누르고 있으면 디바운스는 **버튼을 놓을** 때까지 기다렸다가 한 번의 공격을 수행합니다.

**스로틀** : **규칙적인 리듬을 보장합니다.** 지정된 시간 간격당 최대 한 번만 동작을 트리거합니다. 사용자가 이벤트를 계속 실행하더라도 설정된 시간이 지난 후에만 동작이 실행됩니다.

- **비유** : 지하철역의 개찰구를 생각해 보세요. 개찰구는 5초마다 한 사람만 통과합니다. 줄을 서 있는 사람이 아무리 많아도 한 번에 한 사람만 통과할 수 있고, 5초마다 통과할 수 있습니다. 예를 들어, 공격 버튼을 계속 누르고 있으면 스로틀은 **1초** 마다 공격을 합니다.

### 실행 패턴의 차이

**디바운스 실행 패턴**:

```
이벤트 발생 → 대기 시작 → 새 이벤트 발생 → 타이머 재설정 → 대기 → 실행
```

**스로틀링 실행 패턴**:

```
이벤트 발생 → 즉시 실행 → 대기 → 다음 실행 허용 → 이벤트 발생 → 즉시 실행
```

### 사용 시나리오별 선택 기준

**디바운스가 적합한 경우**:

- **검색 입력**: 사용자가 타이핑을 멈춘 후 검색 실행
- **윈도우 리사이즈**: 크기 조정 완료 후 레이아웃 재계산
- **API 호출**: 연속 요청을 하나로 통합

**스로틀링이 적합한 경우**:

- **스크롤 이벤트**: 스크롤 중 주기적으로 위치 확인
- **게임 입력**: 연속 발사나 이동 처리
- **실시간 업데이트**: 주기적인 데이터 갱신

### 자바스크립트는 이미 쓰고 있다.

`setInterval()`은 정해진 시간 간격(interval)마다 특정 함수를 반복적으로 실행하는 자바스크립트 함수입니다. 이는 스로틀링의 핵심 원리인 **"일정 주기마다 실행"**과 정확히 일치합니다.

반면, **`setTimeout()`**은 **디바운스**를 구현할 때 주로 사용됩니다. `setTimeout()`은 지정된 시간이 지난 후 함수를 한 번 실행하는데, 디바운스 로직은 이 타이머를 매번 초기화하여 마지막 이벤트만 실행하도록 만듭니다.

## 📚 라이브러리를 활용한 구현

### Lodash를 사용한 디바운스

```javascript
// Lodash 라이브러리 사용
const debouncedSearch = _.debounce((searchTerm) => {
  console.log("검색 실행:", searchTerm);
  // API 호출
}, 500);

// 추가 옵션 설정
const debouncedWithOptions = _.debounce(
  (searchTerm) => {
    console.log("검색 실행:", searchTerm);
  },
  500,
  {
    leading: true, // 즉시 실행
    trailing: true, // 지연 실행
    maxWait: 1000, // 최대 대기 시간
  }
);
```

### Lodash를 사용한 스로틀링

```javascript
// 기본 스로틀링
const throttledScroll = _.throttle(() => {
  console.log("스크롤 이벤트 처리");
}, 200);

// 옵션이 있는 스로틀링
const throttledWithOptions = _.throttle(
  () => {
    console.log("스크롤 이벤트 처리");
  },
  200,
  {
    leading: true, // 즉시 실행
    trailing: true, // 후행 실행
  }
);
```

## 🎯 성능 최적화 팁

### 1. 적절한 지연 시간 선택

**디바운스 지연 시간**:

- **검색 입력**: 300-500ms (사용자 타이핑 패턴 고려)
- **폼 검증**: 500-1000ms (즉시성보다 정확성 우선)
- **윈도우 리사이즈**: 250-500ms (레이아웃 계산 비용 고려)

**스로틀링 간격**:

- **스크롤 이벤트**: 100-200ms (부드러운 스크롤 경험)
- **게임 입력**: 16-33ms (60fps 기준)
- **드래그 이벤트**: 50-100ms (반응성과 성능의 균형)
