# 이벤트 위임 (Event Delegation)

이벤트 위임은 수많은 자식 요소에 개별적으로 이벤트 핸들러를 등록하는 대신, 하나의 공통된 부모 요소에만 핸들러를 등록하고, 이벤트 버블링(Bubbling) 현상을 이용하여 자식 요소에서 발생한 이벤트를 부모가 대신 처리하는 기법입니다.

1. **단일 핸들러 등록**: 모든 자식 요소를 담는 부모 컨테이너에 하나의 이벤트 핸들러만 등록
2. **이벤트 버블링 활용**: 자식 요소에서 발생한 이벤트가 부모 요소까지 전달되는 현상 이용
3. **event.target 식별**: 실제 클릭된 요소를 `event.target`으로 식별하여 적절한 로직 실행

## 동적 요소에 효율적으로 이벤트 추가하는 방법

각 요소마다 개별적으로 이벤트 핸들러를 등록하면, 요소의 개수만큼 핸들러가 메모리에 존재하게 됩니다. 100개의 버튼이 있다면 100개의 핸들러가 등록되어 메모리 사용량이 크게 증가합니다. 이벤트 핸들러 등록과 해제 과정에서 DOM 조작이 발생하며, 이는 브라우저의 리플로우와 리페인트를 유발할 수 있습니다. 만약 동적으로 추가되는 요소에 핸들러를 등록해야 되는 일이 발생한다면 성능 저하가 두드러집니다.

이벤트 위임을 사용하면 부모 요소에 하나의 핸들러만 등록하여 모든 자식 요소의 이벤트를 처리할 수 있습니다. 이벤트 위임은 이벤트 버블링을 활용하므로, 나중에 추가되는 요소들도 자동으로 이벤트 처리가 가능합니다. 별도의 이벤트 등록 코드 없이도 동적으로 추가된 요소들이 정상적으로 작동합니다. 하나의 핸들러만 등록하면 이벤트 등록/해제 오버헤드가 최소화되고, 메모리 사용량도 크게 줄어듭니다. 또한 이벤트 버블링을 통해 자연스럽게 이벤트가 전파되므로 추가적인 DOM 조작이 필요하지 않습니다.

이벤트 위임에서 가장 중요한 부분은 실제로 클릭된 요소를 정확히 식별하는 것입니다. `event.target` 속성을 사용하면 이벤트가 발생한 실제 요소를 참조할 수 있습니다. 이를 통해 클릭된 요소의 클래스명, 태그명, 또는 다른 속성을 확인하여 적절한 로직을 실행할 수 있습니다. 예를 들어, 삭제 버튼이 클릭되었는지, 편집 버튼이 클릭되었는지를 구분하여 각각에 맞는 처리 로직을 실행할 수 있습니다.

## 이벤트 버블링의 실행 흐름

### 이벤트 버블링의 단계별 과정

`<div>` 부모 요소 안에 `<button>` 자식 요소가 있는 구조에서 버튼을 클릭하면 다음과 같은 순서로 이벤트가 처리됩니다.

**1단계: 캡처링 단계 (Capturing Phase)**
이벤트는 먼저 DOM 트리의 최상위에서 시작하여 실제 클릭된 요소까지 내려갑니다.

**2단계: 타겟 단계 (Target Phase)**
실제로 클릭된 요소(이 예에서는 `<button>`)에서 이벤트가 발생합니다. 이 시점에서 `event.target`은 클릭된 버튼 요소를 가리킵니다. 버튼에 등록된 이벤트 핸들러가 있다면 이 시점에서 실행됩니다.

**3단계: 버블링 단계 (Bubbling Phase)**
이벤트는 이제 자식 요소에서 부모 요소로 거슬러 올라가며 전파됩니다. 버튼에서 발생한 이벤트가 부모 `<div>` 요소로 전파되고, 부모 요소에 등록된 이벤트 핸들러가 실행됩니다. 이 과정이 계속되어 최상위 요소까지 전파됩니다.

### event.target과 event.currentTarget의 차이

이벤트 버블링 과정에서 중요한 개념은 `event.target`과 `event.currentTarget`의 차이입니다. `event.target`은 실제로 클릭된 요소(이벤트가 발생한 원본 요소)를 가리키며, 버블링 과정에서 변하지 않습니다. 반면 `event.currentTarget`은 현재 이벤트 핸들러가 실행되고 있는 요소를 가리키며, 버블링 과정에서 부모 요소로 이동할 때마다 변경됩니다. 이벤트 위임에서는 `event.target`을 사용하여 실제 클릭된 요소를 식별하고, `event.currentTarget`을 사용하여 이벤트 핸들러가 등록된 부모 요소를 참조할 수 있습니다.

## 이벤트 전파 제어 메서드

### event.stopPropagation()의 동작 원리

`event.stopPropagation()`은 이벤트 버블링을 중단시키는 메서드입니다. 이 메서드가 호출되면 현재 요소에서 이벤트 전파가 중단되어 더 이상 부모 요소로 이벤트가 전파되지 않습니다.

예를 들어, 모달 창 내부의 버튼을 클릭했을 때 모달 외부의 이벤트 핸들러가 실행되지 않도록 하려면 해당 버튼에서 `stopPropagation()`을 호출하면 됩니다. 이렇게 하면 버튼 클릭 이벤트는 모달 내부에서만 처리되고, 모달 외부의 배경 클릭 이벤트는 실행되지 않습니다.

### event.preventDefault()와 기본 동작 제어

`event.preventDefault()`는 이벤트의 기본 동작을 취소하는 메서드입니다. 이 메서드는 이벤트 전파와는 별개로 작동하며, 브라우저의 기본 동작만을 제어합니다. 예를 들어, 링크 클릭 시 페이지 이동을 방지하거나, 폼 제출 시 페이지 새로고침을 방지할 때 사용합니다.

이벤트 위임에서도 링크나 폼 요소의 기본 동작을 제어할 때 자주 사용됩니다. 예를 들어, AJAX를 사용하여 폼을 제출하고 싶을 때 `preventDefault()`를 사용하여 기본 폼 제출 동작을 방지하고, 대신 JavaScript로 폼 데이터를 처리할 수 있습니다.
