# 팩토리 메서드 (Factory Method)

## 📖 개요

**팩토리 메서드 패턴**은 객체 생성 처리를 서브클래스로 위임하여, 객체 생성 로직과 사용하는 클라이언트 코드를 분리하는 디자인 패턴입니다. 클라이언트는 특정 클래스를 직접 `new` 키워드로 생성하지 않고, 팩토리 클래스의 메서드를 호출하여 객체를 '받아' 사용합니다.

## 💡 핵심 원리

팩토리 메서드 패턴의 핵심은 객체 생성 책임을 **팩토리 클래스**에 맡기는 것입니다. 클라이언트는 특정 클래스를 직접 `new` 키워드로 생성하지 않고, 팩토리 클래스의 메서드를 호출하여 객체를 '받아' 사용합니다.

예를 들어, 다양한 종류의 `Button`을 생성해야 한다고 가정해 봅시다. `HtmlButton`, `WindowsButton`, `MacButton` 등 여러 종류가 있습니다.

- **문제점:** 만약 클라이언트 코드가 `new HtmlButton()`처럼 직접 객체를 생성하면, 새로운 `Button` 종류가 추가될 때마다 클라이언트 코드를 수정해야 합니다. 이는 유지보수를 어렵게 만듭니다.
- **해결책:** 팩토리 메서드 패턴을 사용하면, `ButtonFactory`라는 팩토리 클래스를 만듭니다. 이 클래스에는 `createButton()` 같은 팩토리 메서드가 정의되어 있습니다. 각 운영체제(Windows, Mac)에 따라 `WindowsButtonFactory`, `MacButtonFactory`와 같은 서브클래스들을 만들고, 이 서브클래스들이 실제 `Button` 객체를 생성하는 책임을 가집니다.

## 🎯 추상 팩토리와 차이점

- **추상 팩토리**: 서로 관련 있는 **여러 객체들을 묶어서 한 번에 생성**하는 '제품군'을 만드는 데 초점을 둡니다. 각 **팩토리**가 여러 종류의 객체를 생성하는 메서드를 가집니다.
- **팩토리 메소드**: **단일 객체**를 생성하는 과정을 **서브클래스에 위임**하여, 어떤 객체를 만들지 서브클래스가 결정하게 합니다.

## 데이터베이스 커넥션 예제

```javascript
// 데이터베이스 연결 인터페이스
class DatabaseConnection {
  connect() {
    throw new Error("connect() 메서드를 구현해야 합니다.");
  }

  query(sql) {
    throw new Error("query() 메서드를 구현해야 합니다.");
  }

  disconnect() {
    throw new Error("disconnect() 메서드를 구현해야 합니다.");
  }
}

// 구체적인 데이터베이스 연결들
class MySQLConnection extends DatabaseConnection {
  connect() {
    return "MySQL 데이터베이스에 연결되었습니다.";
  }

  query(sql) {
    return `MySQL에서 쿼리 실행: ${sql}`;
  }

  disconnect() {
    return "MySQL 연결이 해제되었습니다.";
  }
}

class PostgreSQLConnection extends DatabaseConnection {
  connect() {
    return "PostgreSQL 데이터베이스에 연결되었습니다.";
  }

  query(sql) {
    return `PostgreSQL에서 쿼리 실행: ${sql}`;
  }

  disconnect() {
    return "PostgreSQL 연결이 해제되었습니다.";
  }
}

// 데이터베이스 팩토리 추상 클래스
class DatabaseFactory {
  createConnection() {
    throw new Error("createConnection() 메서드를 구현해야 합니다.");
  }

  // 공통 로직
  executeQuery(sql) {
    const connection = this.createConnection();
    console.log(connection.connect());
    const result = connection.query(sql);
    console.log(connection.disconnect());
    return result;
  }
}

// 구체적인 팩토리들
class MySQLFactory extends DatabaseFactory {
  createConnection() {
    return new MySQLConnection();
  }
}

class PostgreSQLFactory extends DatabaseFactory {
  createConnection() {
    return new PostgreSQLConnection();
  }
}

// 사용 예시
function executeDatabaseQuery(factory, sql) {
  console.log("데이터베이스 쿼리 실행 중...");
  const result = factory.executeQuery(sql);
  console.log("결과:", result);
}

executeDatabaseQuery(new MySQLFactory(), "SELECT * FROM users");
executeDatabaseQuery(new PostgreSQLFactory(), "SELECT * FROM products");
```
