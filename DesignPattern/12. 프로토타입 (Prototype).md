# í”„ë¡œí† íƒ€ì… (Prototype)

## ğŸ“– ê°œìš”

í”„ë¡œí† íƒ€ì… íŒ¨í„´ì€ **ê¸°ì¡´ ê°ì²´ë¥¼ ë³µì œí•˜ì—¬ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±**í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤. `new` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ë¥¼ ì§ì ‘ ìƒì„±í•˜ëŠ” ëŒ€ì‹ , ì´ë¯¸ ë§Œë“¤ì–´ì§„ **'ì›í˜•(prototype)' ê°ì²´**ë¥¼ ë³µì‚¬(clone)í•˜ì—¬ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë§Œë“œëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ íŒ¨í„´ì€ ê°ì²´ ìƒì„± ë¹„ìš©ì´ í¬ê±°ë‚˜, ê°ì²´ë¥¼ ì§ì ‘ ìƒì„±í•˜ê¸° ì–´ë ¤ìš´ ê²½ìš°ì— ìœ ìš©í•©ë‹ˆë‹¤.

ê²Œì„ì„ ì˜ˆì‹œë¡œ ë“¤ë©´, ë³¸ì¸ì˜ ëŠ¥ë ¥ì¹˜ë¥¼ ê·¸ëŒ€ë¡œ ë³µì‚¬í•œ ë¶„ì‹ ì´ ìƒê¸°ëŠ” ê²ƒ, ê·¸ëŸ¬ë‚˜ ìƒê¸´ ì´í›„ì—” ë¶„ì‹ ê³¼ ë³¸ì²´ì˜ ì²´ë ¥ ê°ì†ŒëŠ” ê°ê° ì´ë£¨ì–´ì ¸ì•¼ í•œë‹¤. ë§Œì•½ ì²´ë ¥ì´ ì„œë¡œ ë™ê¸°í™”ëœ ìƒíƒœë¼ë©´? ê·¸ê²ƒì€ **ì–•ì€ ë³µì‚¬** ìƒíƒœ, í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ ë³µì œí•œ ê°ì²´ê°€ ì›ë³¸(í”„ë¡œí† íƒ€ì…)ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šìœ¼ë ¤ë©´ **ê¹Šì€ ë³µì‚¬(Deep Copy)** ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

## âœ… ì¥ì 

- **ìƒì„± ë¹„ìš© ì ˆê°**: ë³µì¡í•œ ì´ˆê¸°í™” ê³¼ì • ìƒëµ

## âŒ ë‹¨ì 

- **ë³µì‚¬ ë³µì¡ì„±**: ê¹Šì€ ë³µì‚¬ ì‹œ ìˆœí™˜ ì°¸ì¡° ì²˜ë¦¬ ì–´ë ¤ì›€
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: í° ê°ì²´ ë³µì‚¬ ì‹œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€
- **ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œ**: ë³µì¡í•œ ê°ì²´ êµ¬ì¡° ë³µì‚¬ ì‹œ ì„±ëŠ¥ ì €í•˜ ê°€ëŠ¥

## ğŸš€ ì‹¤ìš©ì  ì˜ˆì œ

### 1. ê²Œì„ ìºë¦­í„° í”„ë¡œí† íƒ€ì… (ë°”ë‹ë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸)

```javascript
// ê¹Šì€ ë³µì‚¬ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
function deepClone(obj) {
  if (obj === null || typeof obj !== "object") return obj;
  if (Array.isArray(obj)) return obj.map((item) => deepClone(item));

  const cloned = {};
  for (const key in obj) {
    if (obj.hasOwnProperty(key)) {
      cloned[key] = deepClone(obj[key]);
    }
  }
  return cloned;
}

// ê²Œì„ ìºë¦­í„° í”„ë¡œí† íƒ€ì…
class GameCharacter {
  constructor(name, stats) {
    this.name = name;
    this.stats = stats;
  }

  clone() {
    return deepClone(this);
  }

  takeDamage(damage) {
    this.stats.health -= damage;
  }
}

// ì‚¬ìš© ì˜ˆì‹œ
const original = new GameCharacter("ìš©ì‚¬", { health: 100, mana: 50 });
const cloned = original.clone();
cloned.name = "ìš©ì‚¬ì˜ ë¶„ì‹ ";

// ë…ë¦½ì„± í…ŒìŠ¤íŠ¸
original.takeDamage(20);
cloned.takeDamage(30);
```

### 2. ì„¤ì • í…œí”Œë¦¿ í”„ë¡œí† íƒ€ì… (Lodash ì‚¬ìš©)

```javascript
// ì„¤ì • í…œí”Œë¦¿ í”„ë¡œí† íƒ€ì…
class ConfigTemplate {
  constructor(name, settings, environment) {
    this.name = name;
    this.settings = settings;
    this.environment = environment;
  }

  cloneWithLodash() {
    if (typeof _ !== "undefined" && _.cloneDeep) {
      return _.cloneDeep(this);
    }
    return JSON.parse(JSON.stringify(this));
  }

  applyEnvironment(env) {
    if (this.environment[env]) {
      Object.assign(this.settings, this.environment[env]);
    }
  }
}

// ì‚¬ìš© ì˜ˆì‹œ
const baseConfig = new ConfigTemplate(
  "Production",
  {
    database: { host: "localhost", port: 5432 },
    api: { port: 3000 },
  },
  {
    development: { database: { host: "dev-db" }, api: { port: 3001 } },
    staging: { database: { host: "staging-db" }, api: { port: 3002 } },
  }
);

const devConfig = baseConfig.cloneWithLodash();
devConfig.name = "Development";
devConfig.applyEnvironment("development");

console.log("ê°œë°œ í™˜ê²½ í˜¸ìŠ¤íŠ¸:", devConfig.settings.database.host); // dev-db
```

### ğŸ”§ êµ¬í˜„ íŒ

### 1. **ê¹Šì€ ë³µì‚¬ ë°©ë²• ì„ íƒ**

- **ë°”ë‹ë¼ JS**: `JSON.parse(JSON.stringify())` - ê°„ë‹¨í•˜ì§€ë§Œ ì œí•œì 
- **Lodash**: `_.cloneDeep()` - ì•ˆì „í•˜ê³  ì™„ì „í•œ ê¹Šì€ ë³µì‚¬
- **Structured Clone API**: `structuredClone()` - ìµœì‹  ë¸Œë¼ìš°ì € ì§€ì›

### 2. **ìˆœí™˜ ì°¸ì¡° ì²˜ë¦¬**

```javascript
function deepCloneWithCircular(obj, hash = new WeakMap()) {
  if (obj === null || typeof obj !== "object") return obj;
  if (hash.has(obj)) return hash.get(obj);

  const cloned = Array.isArray(obj) ? [] : {};
  hash.set(obj, cloned);

  for (const key in obj) {
    if (obj.hasOwnProperty(key)) {
      cloned[key] = deepCloneWithCircular(obj[key], hash);
    }
  }

  return cloned;
}
```
