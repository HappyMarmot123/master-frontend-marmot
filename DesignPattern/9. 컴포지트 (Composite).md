# 컴포지트 (Composite)

컴포지트(Composite) 패턴은 **객체들의 트리 구조를 형성하여, 개별 객체와 복합 객체를 동일하게 다룰 수 있게 하는** 구조 패턴입니다. 이를 통해 클라이언트는 단일 객체인지 복합 객체인지 구분하지 않고 일관된 방식으로 코드를 다룰 수 있습니다.

## 컴포지트 패턴의 목적과 작동 방식

이 패턴의 핵심은 **재귀적인 구조**를 만들어 복잡한 계층 구조를 단순하게 처리하는 것입니다. 예를 들어, UI 컴포넌트, 파일 시스템, 조직도 같은 계층적인 데이터를 다룰 때 유용합니다.

컴포지트 패턴은 다음 세 가지 주요 구성 요소로 이루어집니다.

1. **컴포넌트 (Component)** : 개별 객체(Leaf)와 복합 객체(Composite)에 대한 공통 인터페이스를 정의합니다. 이 인터페이스에는 자식 객체를 추가, 제거, 접근하는 메서드가 포함될 수 있습니다.
2. **리프 (Leaf)** : 계층 구조에서 더 이상 자식을 가질 수 없는 '개별' 객체입니다. 컴포넌트 인터페이스를 구현합니다. (예: 파일)
3. **컴포지트 (Composite)** : 자식 컴포넌트들을 가질 수 있는 '복합' 객체입니다. 리프와 마찬가지로 컴포넌트 인터페이스를 구현하며, 자식들을 관리하는 메서드를 가집니다. (예: 폴더)

## 프론트엔드 활용 아이디어

- **⭐ UI 구성요소 트리**: 레이아웃, 메뉴, 드롭다운 일관 렌더링 ⭐

## 구조

- Component(공통 연산)
- Leaf(실제 작업 수행)
- Composite(자식 관리, 연산 위임/집계)

## 장단점

- **장점**: 클라이언트 코드 단순화, 확장 용이
- **단점**: 타입 제약 약화, 자원/라이프사이클 관리 복잡성

## JavaScript 예제

```javascript
// 1. 컴포넌트(Component) 인터페이스 역할
class MenuItemComponent {
  constructor(name, link) {
    this.name = name;
    this.link = link;
  }

  render() {
    throw new Error('render() must be implemented.');
  }
}

// 2. 리프(Leaf) 역할: 단일 메뉴 항목
class SingleMenuItem extends MenuItemComponent {
  render() {
    return `<li><a href="${this.link}">${this.name}</a></li>`;
  }
}

// 3. 컴포지트(Composite) 역할: 복합 메뉴 항목 (자식을 가짐)
class CompositeMenuItem extends MenuItemComponent {
  constructor(name) {
    super(name, '#');
    this.children = [];
  }

  add(component) {
    this.children.push(component);
  }

  render() {
    const subMenuItems = this.children.map(child => child.render()).join('');

    return `
      <li class="has-submenu">
        <a href="${this.link}">${this.name}</a>
        <ul class="submenu">
          ${subMenuItems}
        </ul>
      </li>
    `;
  }
}

---

// 메뉴 구조 생성
const home = new SingleMenuItem('Home', '/');

// Portfolio메뉴는 여러 항목을 포함하므로 CompositeMenuItem 사용
const portfolioMenu = new CompositeMenuItem('Portfolio');
portfolioMenu.add(new SingleMenuItem('Case Studies', '/portfolio/cases'));
portfolioMenu.add(new SingleMenuItem('Client Work', '/portfolio/clients'));

const mainMenu = new CompositeMenuItem('Main Menu');
mainMenu.add(home);
mainMenu.add(portfolioMenu);

// UI에 메뉴 렌더링
const renderedMenu = mainMenu.render();
menuContainer.innerHTML = `<ul class="main-menu">${renderedMenu}</ul>`;
```
