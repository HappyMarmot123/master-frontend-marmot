# 키 (Key)

데이터베이스에서 '키(Key)'는 테이블(릴레이션) 내의 특정 레코드(행)를 고유하게 식별하거나, 다른 테이블과의 관계를 설정하는 데 사용되는 하나 이상의 컬럼(속성) 집합입니다. 키는 데이터의 무결성을 유지하고, 데이터 검색 및 정렬 성능을 향상시키는 데 중요한 역할을 합니다.

## 1. 키의 종류

다양한 종류의 키가 있으며, 각각의 목적과 용도가 다릅니다.

### 1.1. 슈퍼 키 (Super Key)

- **정의:** 릴레이션 내의 모든 튜플(행)을 유일하게 식별할 수 있는 하나 이상의 속성(컬럼)들의 집합입니다. 슈퍼 키는 유일성(Uniqueness)을 만족하지만, 최소성(Minimality)은 만족하지 않을 수 있습니다. 즉, 불필요한 속성을 포함할 수 있습니다.
- **예시:** `(학번, 주민등록번호)`, `(학번, 이름, 전화번호)`

### 1.2. 후보 키 (Candidate Key)

- **정의:** 릴레이션을 유일하게 식별하는 최소한의 속성 집합입니다. 유일성(Uniqueness)과 최소성(Minimality)을 모두 만족합니다. 슈퍼 키 중에서 최소성을 만족하는 키입니다.
- **예시:** `(학번)`, `(주민등록번호)`

### 1.3. 기본 키 (Primary Key, PK)

- **정의:** 후보 키 중에서 특별히 선택되어 테이블의 각 레코드를 고유하게 식별하는 데 사용되는 키입니다. 기본 키는 다음과 같은 특징을 가집니다.
  - **유일성:** 모든 레코드를 고유하게 식별합니다.
  - **최소성:** 키를 구성하는 속성 중 하나라도 제거하면 유일성을 잃습니다.
  - **개체 무결성 (Entity Integrity):** `NULL` 값을 가질 수 없습니다 (NOT NULL). 즉, 항상 값을 가져야 합니다.
  - **불변성:** 자주 변경되지 않는 속성으로 선정하는 것이 좋습니다.
- **예시:** `학번`, `상품코드`, `주문번호`

### 1.4. 대체 키 (Alternate Key)

- **정의:** 후보 키 중에서 기본 키로 선택되지 않은 나머지 후보 키들을 대체 키라고 합니다.
- **예시:** `주민등록번호` (만약 `학번`이 기본 키로 선택되었다면)

### 1.5. 외래 키 (Foreign Key, FK)

- **정의:** 한 테이블의 특정 컬럼(들)이 다른 테이블의 기본 키(또는 후보 키)를 참조하는 키입니다. 외래 키는 테이블 간의 관계를 정의하고, 참조 무결성(Referential Integrity)을 유지하는 데 사용됩니다.
  - **참조 무결성:** 외래 키는 참조하는 테이블의 기본 키 값만 가질 수 있습니다. 즉, 부모 테이블에 없는 값을 자식 테이블의 외래 키로 가질 수 없습니다.
- **예시:** `수강` 테이블의 `학번` (-> `학생` 테이블의 `학번` 기본 키 참조)

## 2. 키의 중요성

데이터베이스에서 키는 다음과 같은 이유로 매우 중요합니다.

- **데이터 무결성 유지:** 데이터의 정확성과 일관성을 보장합니다.
- **레코드 식별:** 각 레코드를 유일하게 식별하여 필요한 데이터를 정확하게 찾을 수 있도록 합니다.
- **테이블 간 관계 설정:** 외래 키를 통해 여러 테이블을 연결하고 데이터를 효율적으로 관리할 수 있습니다.
- **데이터 검색 및 정렬 성능 향상:** 특히 기본 키와 외래 키는 인덱스로 자동 생성되거나 생성될 수 있어 쿼리 성능을 향상시킵니다.

## 3. 예제 (SQL)

다음은 SQL에서 테이블을 생성하며 키를 정의하는 간단한 예시입니다.

```sql
-- 학생 테이블 (PK: student_id)
CREATE TABLE Students (
    student_id INT PRIMARY KEY, -- 기본 키 (학번)
    student_name VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE -- 이메일은 중복될 수 없으므로 UNIQUE 제약조건 (후보 키 역할)
);

-- 과목 테이블 (PK: course_id)
CREATE TABLE Courses (
    course_id INT PRIMARY KEY, -- 기본 키 (과목 코드)
    course_name VARCHAR(100) NOT NULL
);

-- 수강 테이블 (PK: (student_id, course_id), FK: student_id, course_id)
CREATE TABLE Enrollments (
    enrollment_id INT PRIMARY KEY AUTO_INCREMENT, -- 고유한 수강 ID (기본 키)
    student_id INT, -- 외래 키 (학생 테이블 참조)
    course_id INT,  -- 외래 키 (과목 테이블 참조)
    enrollment_date DATE,
    FOREIGN KEY (student_id) REFERENCES Students(student_id),
    FOREIGN KEY (course_id) REFERENCES Courses(course_id)
);

-- 예시 데이터 삽입
INSERT INTO Students (student_id, student_name, email) VALUES
(1, '김철수', 'kim@example.com'),
(2, '박영희', 'park@example.com');

INSERT INTO Courses (course_id, course_name) VALUES
(101, '데이터베이스 개론'),
(102, '자료구조');

INSERT INTO Enrollments (student_id, course_id, enrollment_date) VALUES
(1, 101, '2023-03-01'),
(1, 102, '2023-03-01'),
(2, 101, '2023-03-01');

-- 학생 김철수의 수강 과목 조회
SELECT S.student_name, C.course_name
FROM Students S
JOIN Enrollments E ON S.student_id = E.student_id
JOIN Courses C ON E.course_id = C.course_id
WHERE S.student_name = '김철수';
```

**코드 설명:**

- `Students` 테이블은 `student_id`를 **기본 키**로, `email` 컬럼에 `UNIQUE` 제약조건을 부여하여 **후보 키** 역할을 하도록 합니다.
- `Courses` 테이블은 `course_id`를 **기본 키**로 가집니다.
- `Enrollments` 테이블은 `enrollment_id`를 **기본 키**로 가지며, `student_id`와 `course_id`는 각각 `Students` 테이블과 `Courses` 테이블의 기본 키를 참조하는 **외래 키**로 정의됩니다. 이 외래 키를 통해 두 테이블 간의 관계가 설정됩니다.
- 마지막 `SELECT` 문은 `JOIN`을 사용하여 외래 키로 연결된 테이블들로부터 학생의 수강 과목 정보를 조회하는 예시입니다.
