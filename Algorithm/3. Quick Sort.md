# 퀵 정렬 (Quick Sort)

퀵 정렬은 **분할 정복(Divide and Conquer)** 전략을 사용하는 대표적인 정렬 알고리즘입니다. 배열 내에서 하나의 기준점(**피벗, pivot**)을 설정하고, 피벗보다 작은 값들은 왼쪽으로, 큰 값들은 오른쪽으로 분할한 뒤, 분할된 각 부분을 재귀적으로 정렬합니다.

## 1. 동작 방식

퀵 정렬의 핵심은 피벗(pivot) 선택과 분할(partitioning) 과정에 있습니다.

1. **피벗 선택:** 배열 내에서 하나의 요소를 피벗으로 선택합니다. 피벗은 보통 배열의 첫 번째, 마지막, 중간 요소 또는 무작위로 선택될 수 있습니다.
2. **분할(Partitioning):** 피벗을 기준으로 배열을 두 개의 부분 배열로 나눕니다.
   - 피벗보다 작거나 같은 요소들은 피벗의 왼쪽으로 이동합니다.
   - 피벗보다 큰 요소들은 피벗의 오른쪽으로 이동합니다.
   - 이 과정을 통해 피벗은 최종 정렬 위치에 놓이게 됩니다.
3. **재귀 호출:** 피벗의 왼쪽 부분 배열과 오른쪽 부분 배열에 대해 재귀적으로 퀵 정렬을 다시 호출합니다. 이 과정은 부분 배열의 크기가 1 이하가 될 때까지 반복됩니다.

## 2. 장점

- **정렬되지 않은 대규모 데이터셋에 매우 효율적입니다.**
- **제자리 정렬(In-place Sorting) 방식입니다.** 대부분의 정렬이 추가적인 메모리 공간을 거의 사용하지 않습니다.

정렬되지 않은 대규모 데이터셋에서 퀵 정렬은 매우 효과적이지만, 피벗 선택에 따라 성능이 크게 좌우됩니다. 예를 들어 이미 정렬된 배열에서 항상 첫 번째 또는 마지막 원소를 피벗으로 선택하는 경우, 분할이 한쪽으로 치우쳐 (n-1, 0) 성능이 저하됩니다.

1. **피벗 선택 (최악의 경우):** 배열의 첫 번째 요소를 피벗으로 선택한다고 가정해 보겠습니다.
   - `[1, 2, 3, 4, 5, 6, 7]`
2. **첫 번째 파티션:** 피벗 '1'을 기준으로 배열을 나누면, '1'보다 작은 값은 없고, 모든 나머지 값들은 '1'보다 큽니다.
   - **왼쪽:** `[]` (빈 배열)
   - **오른쪽:** `[2, 3, 4, 5, 6, 7]`
3. **두 번째 파티션:** 이제 오른쪽 부분 `[2, 3, 4, 5, 6, 7]`에서 다시 첫 번째 요소인 '2'를 피벗으로 고르면, 또다시 불균형하게 나뉩니다.
   - **왼쪽:** `[]`
   - **오른쪽:** `[3, 4, 5, 6, 7]`

이런 과정이 계속 반복되면, 퀵 정렬은 효율적인 분할 정복이 아닌, 마치 **선택 정렬**이나 **삽입 정렬**처럼 한 번에 한 요소씩만 처리하는 비효율적인 방식이 됩니다.

## 3. 시간 복잡도

- **최선 (Best Case):** O(N log N) - 피벗이 배열을 균등하게 분할하는 경우.
- **평균 (Average Case):** O(N log N)
- **최악 (Worst Case):** O(N^2)

## 4. 예제 코드 (JavaScript)

```javascript
function quickSort(arr) {
  if (arr.length <= 1) {
    // 배열의 길이가 1 이하면 이미 정렬된 것으로 간주
    return arr;
  }

  const pivot = arr[0]; // 첫 번째 요소를 피벗으로 선택
  const left = [];
  const right = [];

  for (let i = 1; i < arr.length; i++) {
    if (arr[i] < pivot) {
      left.push(arr[i]);
    } else {
      right.push(arr[i]);
    }
  }

  // 재귀적으로 왼쪽, 피벗, 오른쪽을 합쳐 반환
  return [...quickSort(left), pivot, ...quickSort(right)];
}

// 사용 예시:
// let array = [3, 0, 2, 5, -1, 4, 1];
// console.log("원본 배열:", array); // 원본 배열: [3, 0, 2, 5, -1, 4, 1]
// console.log("정렬된 배열:", quickSort(array)); // 정렬된 배열: [-1, 0, 1, 2, 3, 4, 5]
```

**코드 설명:**

1. **기저 조건:** 배열의 길이가 1 이하이면 이미 정렬된 상태이므로 그대로 반환합니다.
2. **피벗 선택:** 여기서는 배열의 첫 번째 요소를 피벗으로 선택합니다.
3. **분할:** 피벗을 제외한 나머지 요소들을 순회하며 피벗보다 작은 요소는 `left` 배열에, 큰 요소는 `right` 배열에 넣습니다.
4. **재귀 호출 및 병합:** `left` 배열과 `right` 배열에 대해 재귀적으로 `quickSort`를 호출하고, 정렬된 `left` 배열, 피벗, 정렬된 `right` 배열을 합쳐 새로운 배열을 반환합니다.
