# CSS attr() 함수

## 📖 개요

**CSS `attr()` 함수**는 HTML 요소의 속성(attribute) 값을 CSS에서 참조해 쓸 수 있게 해주는 기능입니다. 대표적으로 `content` 속성에서 가상 요소(`::before`, `::after`)의 텍스트를 동적으로 출력할 때 활용합니다. 중복 코드를 줄이고, HTML 의미를 CSS 표현과 연결하는 데 유용합니다.

## 기본 문법과 동작 원리

```css
content: attr(attribute-name);
content: attr(attribute-name, fallback-value);
```

- **읽기 대상**: 가상 요소가 붙은 “그 요소”의 속성만 읽습니다(상위/자식의 속성은 불가)
- **실시간성**: 속성 값이 런타임에 변경되면 브라우저가 다시 페인트하면서 출력도 업데이트
- **폴백(fallback)**: 속성이 없거나 빈 문자열일 때 대체 문자열을 사용
- **이스케이프**: 큰따옴표/백슬래시 등 특수문자 출력 시 적절히 이스케이프 또는 따옴표 감싸기

## 언제 쓰면 좋은가

- **툴팁/도구 설명**: `data-tooltip` → 시각적 힌트 출력
- **배지/카운트**: `data-count` → 알림 수량 표시(핵심 데이터는 HTML에도 존재해야 함)
- **라벨/상태표시**: `data-label`, `data-status` → 보조 텍스트

**패턴 예제:**

```css
.tooltip {
  position: relative;
}
.tooltip:hover::after {
  content: attr(data-tooltip, "");
  position: absolute;
  inset-inline-start: 0;
  inset-block-end: 100%;
}
```

## `:not()` - 부정 의사 클래스 (Negation Pseudo-class)

`:not()` 선택자는 특정 조건을 만족하지 **않는** 요소를 선택합니다. 주로 목록의 마지막 요소에만 스타일을 제외하거나, 특정 상태가 아닌 요소에 스타일을 적용할 때 유용합니다.

목록의 아이템 사이에 간격을 줄 때, 마지막 요소에는 스타일이 적용되지 않도록 할 수 있습니다.

```css
/* li 요소 중 마지막 타입이 아닌 모든 li 요소 */
ul li:not(:last-of-type) {
  margin-bottom: 20px;
}
```

## `:has()` - 관계형 의사 클래스 (Parent Selector)

`:has()` 선택자는 CSS의 오랜 숙원이었던 **"부모 선택자"** 기능을 제공합니다. 특정 자식이나 형제 요소를 포함하는 요소를 선택할 수 있어, UI의 상태에 따라 부모 요소의 스타일을 동적으로 변경할 수 있습니다.

`p` 태그를 직계 자식으로 가진 `div`를 선택합니다. 이를 통해 콘텐츠 구조에 따라 컨테이너의 스타일을 다르게 적용할 수 있습니다.

```css
/* 직계 자식으로 <p>를 가진 <div> */
div:has(> p) {
  background-color: lightgray;
  padding: 20px;
}
```

### 패턴 2: 폼 유효성 검사 상태에 따른 스타일링

폼 내부에 유효하지 않은 `input`이 하나라도 있으면 `form` 전체나 특정 요소(예: 제출 버튼)의 스타일을 변경할 수 있습니다.

```css
/* 유효하지 않은 입력 필드가 있는 폼 */
form:has(input:invalid) .submit-button {
  opacity: 0.5;
  pointer-events: none; /* 버튼 비활성화 */
}
```

### 패턴 3: 콘텐츠에 따른 레이아웃 변경

카드 컴포넌트 내부에 이미지가 있을 때와 없을 때의 레이아웃을 다르게 적용할 수 있습니다.

```css
/* <img> 자손을 포함하는 .card */
.card:has(img) {
  display: flex;
  flex-direction: row;
}
```
