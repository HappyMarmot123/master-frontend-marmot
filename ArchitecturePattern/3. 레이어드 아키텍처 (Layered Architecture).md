# 레이어드 아키텍처 (Layered Architecture)

## 📖 개요

**레이어드 아키텍처(Layered Architecture)** 는 Presentation(Web), Business Logic(Service), Data Access(Repository) 계층으로 나누는 방식입니다. 상위 계층은 하위 계층에만 의존하며, 각 계층의 역할이 명확하여 유지보수가 쉽습니다. Java의 스프링 프레임워크나 Node.js의 Express에서 흔히 사용됩니다.

### 1. 모놀리식 애플리케이션의 문제점

**전통적인 개발 방식의 한계**:

- **스파게티 코드**: 모든 로직이 한 곳에 뒤섞여 있는 구조
- **단일 파일 거대화**: 하나의 파일에 수천 줄의 코드가 몰림
- **의존성 혼재**: 데이터베이스 코드와 UI 코드가 직접 연결
- **재사용 불가**: 특정 기능을 다른 곳에서 사용하기 어려움

**실제 문제 상황**:

```php
// 문제가 있는 전통적인 PHP 코드
<?php
// index.php - 모든 로직이 한 파일에
if ($_POST['action'] == 'create_user') {
    // 1. 입력 검증 (표현 계층)
    if (empty($_POST['name'])) die('이름 필수');

    // 2. 비즈니스 로직 (비즈니스 계층)
    $password = password_hash($_POST['password'], PASSWORD_DEFAULT);

    // 3. 데이터베이스 접근 (데이터 계층)
    $conn = new PDO('mysql:host=localhost;dbname=app', $user, $pass);
    $stmt = $conn->prepare('INSERT INTO users...');
    $stmt->execute([$_POST['name'], $password]);

    // 4. HTML 출력 (표현 계층)
    echo '<h1>사용자 생성 완료</h1>';
}
?>
```

### 2. 엔터프라이즈 애플리케이션의 발전

**복잡한 비즈니스 요구사항**:

- 다양한 사용자 인터페이스 지원 (웹, 모바일, API)
- 복잡한 비즈니스 규칙과 워크플로우
- 다중 데이터 소스와 외부 시스템 연동
- 보안, 트랜잭션, 캐싱 등 횡단 관심사

**현대 시스템 성공 사례**:

- **Spring Boot**: Java 생태계의 레이어드 아키텍처 표준
- **Django**: Python의 MVT 패턴을 통한 레이어 분리
- **Ruby on Rails**: Convention over Configuration으로 레이어 구조 자동화
- **ASP.NET Core**: 의존성 주입을 통한 현대적 레이어드 아키텍처

## 🏗️ 레이어드 아키텍처 구조

### 계층 구조 (위에서 아래로)

```
┌─────────────────────────────────────┐
│           Presentation Layer        │ ← 사용자 인터페이스
│       (Controller, Routes, Vue)     │
├─────────────────────────────────────┤
│           Business Logic Layer      │ ← 비즈니스 로직
│           (Service, Use Cases)      │
├─────────────────────────────────────┤
│           Data Access Layer         │ ← 데이터 접근
│         (Repository, DAO)           │
├─────────────────────────────────────┤
│           Data Source Layer         │ ← 데이터베이스, 외부 API
│         (Database, External API)    │
└─────────────────────────────────────┘
```

### 의존성 규칙

```
Presentation → Business Logic → Data Access → Data Source
```

- **상위 계층**은 **하위 계층**에만 의존 가능
- **하위 계층**은 **상위 계층**에 의존 불가
- **같은 계층** 내에서는 **순환 의존성** 금지
