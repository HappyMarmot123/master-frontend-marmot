# MVC (Model-View-Controller)

## ğŸ“– ê°œìš”

**MVC(Model-View-Controller)**ëŠ” ì „í†µì ì¸ ì›¹ ê°œë°œì—ì„œ ë§ì´ ì‚¬ìš©ë˜ëŠ” íŒ¨í„´ìœ¼ë¡œ, ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” ëª¨ë¸, ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‹´ë‹¹í•˜ëŠ” ë·°, ì‚¬ìš©ìì˜ ì…ë ¥ì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì—­í• ì„ ë‚˜ëˆ•ë‹ˆë‹¤.

## ğŸ—ï¸ MVCì˜ ë“±ì¥ ë°°ê²½

### 1. ì´ˆê¸° ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì˜ ë¬¸ì œì 

**ëª¨ë†€ë¦¬ì‹ ì½”ë“œ êµ¬ì¡°ì˜ í•œê³„**:

- **ì½”ë“œ ë’¤ì„ì„**: UI ë¡œì§, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ë°ì´í„° ì²˜ë¦¬ê°€ í•œ ê³³ì— ì§‘ì¤‘
- **ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€**: ì‘ì€ ë³€ê²½ì—ë„ ì „ì²´ ì‹œìŠ¤í…œì— ì˜í–¥
- **í…ŒìŠ¤íŠ¸ ë³µì¡ì„±**: ê° ê¸°ëŠ¥ì„ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ì›€
- **í˜‘ì—… ë¹„íš¨ìœ¨**: ì—¬ëŸ¬ ê°œë°œìê°€ ë™ì‹œì— ì‘ì—…í•˜ê¸° ì–´ë ¤ìš´ êµ¬ì¡°

### 2. MVCì˜ íƒ„ìƒê³¼ ì§„í™”

**Xerox PARCì˜ Smalltalk-80 (1970ë…„ëŒ€)**:

- Trygve Reenskaugê°€ ìµœì´ˆë¡œ ì œì•ˆí•œ ì•„í‚¤í…ì²˜ íŒ¨í„´
- GUI ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¡°ì  ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ê³ ì•ˆ
- ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ë¶„ë¦¬ ê°œë… ë„ì…

**ì›¹ ê°œë°œë¡œì˜ í™•ì‚°**:

- **1990ë…„ëŒ€ í›„ë°˜**: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë³µì¡í•´ì§€ë©´ì„œ MVC í•„ìš”ì„± ëŒ€ë‘
- **Ruby on Rails (2004)**: "Convention over Configuration"ìœ¼ë¡œ MVC ëŒ€ì¤‘í™”
- **Spring Framework (2003)**: Java ì§„ì˜ì—ì„œ MVC íŒ¨í„´ í‘œì¤€í™”
- **ASP.NET MVC (2009)**: Microsoftì˜ ì›¹ ê°œë°œ MVC í”„ë ˆì„ì›Œí¬
- **Express.js (2010)**: Node.js ìƒíƒœê³„ì—ì„œ MVC íŒ¨í„´ êµ¬í˜„

### 3. í˜„ëŒ€ì  ê´€ì ì—ì„œì˜ MVC

**RESTful API ì‹œëŒ€ì˜ MVC**:

- ë°±ì—”ë“œ API ì„œë²„ì˜ í‘œì¤€ ì•„í‚¤í…ì²˜
- ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì˜ ê¸°ë³¸ êµ¬ì¡°
- í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ë¶„ë¦¬ë¥¼ í†µí•œ ì—­í•  ëª…í™•í™”

**í”„ë ˆì„ì›Œí¬ë³„ MVC í•´ì„**:

- **Django**: MVT(Model-View-Template) íŒ¨í„´ ì±„íƒ
- **Laravel**: Eloquent ORMì„ í†µí•œ í˜„ëŒ€ì  MVC êµ¬í˜„
- **Next.js**: API Routesë¥¼ í†µí•œ í’€ìŠ¤íƒ MVC íŒ¨í„´

## ğŸ—ï¸ MVC ì•„í‚¤í…ì²˜ êµ¬ì¡°

### í•µì‹¬ êµ¬ì„± ìš”ì†Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    View     â”‚â—„â”€â”€â–ºâ”‚   Controller    â”‚â—„â”€â”€â–ºâ”‚    Model    â”‚
â”‚  (UI)      â”‚    â”‚  (ë¡œì§ ì²˜ë¦¬)     â”‚    â”‚  (ë°ì´í„°)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. Model (ëª¨ë¸)

- **ë°ì´í„° êµ¬ì¡°**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë°ì´í„°ë¥¼ ë‹´ë‹¹
- **ë°ì´í„°ë² ì´ìŠ¤**: ë°ì´í„°ì˜ CRUD ì‘ì—… ì²˜ë¦¬
- **ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™**: ë„ë©”ì¸ ë¡œì§ê³¼ ìœ íš¨ì„± ê²€ì‚¬
- **ìƒíƒœ ê´€ë¦¬**: ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœ ì •ë³´ ê´€ë¦¬

### 2. View (ë·°)

- **UI í‘œí˜„**: ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§€ëŠ” ì¸í„°í˜ì´ìŠ¤
- **ë°ì´í„° í‘œì‹œ**: ëª¨ë¸ì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©ìì—ê²Œ í‘œì‹œ
- **ì‚¬ìš©ì ì…ë ¥**: ì‚¬ìš©ìì˜ ì•¡ì…˜ì„ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì „ë‹¬
- **í…œí”Œë¦¿**: ë°ì´í„°ë¥¼ ë Œë”ë§í•˜ëŠ” í…œí”Œë¦¿ íŒŒì¼

### 3. Controller (ì»¨íŠ¸ë¡¤ëŸ¬)

- **ìš”ì²­ ì²˜ë¦¬**: ì‚¬ìš©ìì˜ ì…ë ¥ê³¼ ìš”ì²­ì„ ì²˜ë¦¬
- **ë¡œì§ ì œì–´**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ íë¦„ì„ ì œì–´
- **ëª¨ë¸ ì¡°ì‘**: ëª¨ë¸ì˜ ë°ì´í„°ë¥¼ ì¡°ì‘í•˜ê³  ì—…ë°ì´íŠ¸
- **ë·° ì„ íƒ**: ì ì ˆí•œ ë·°ë¥¼ ì„ íƒí•˜ì—¬ ì‘ë‹µ

## ğŸ” Node.js/Expressì—ì„œì˜ MVC êµ¬í˜„

### 1. Model Layer

```typescript
// src/models/User.ts
export interface User {
  id: string;
  name: string;
  email: string;
  role: "user" | "admin";
}

// src/models/UserModel.ts
export class UserModel {
  private db: Pool;

  constructor(db: Pool) {
    this.db = db;
  }

  async findAll(): Promise<User[]> {
    const query = "SELECT id, name, email, role FROM users";
    const result = await this.db.query(query);
    return result.rows.map(this.mapRowToUser);
  }

  async findById(id: string): Promise<User | null> {
    const query = "SELECT id, name, email, role FROM users WHERE id = $1";
    const result = await this.db.query(query, [id]);
    return result.rows.length > 0 ? this.mapRowToUser(result.rows[0]) : null;
  }

  async create(userData: Omit<User, "id">): Promise<User> {
    const query = `
      INSERT INTO users (name, email, role)
      VALUES ($1, $2, $3)
      RETURNING id, name, email, role
    `;
    const values = [userData.name, userData.email, userData.role];
    const result = await this.db.query(query, values);
    return this.mapRowToUser(result.rows[0]);
  }

  private mapRowToUser(row: any): User {
    return {
      id: row.id,
      name: row.name,
      email: row.email,
      role: row.role,
    };
  }
}
```

### 2. Controller Layer

```typescript
// src/controllers/UserController.ts
export class UserController {
  private userService: UserService;

  constructor(userService: UserService) {
    this.userService = userService;
  }

  async getUsers(req: Request, res: Response): Promise<void> {
    try {
      const { page = 1, limit = 10 } = req.query;
      const result = await this.userService.getUsers({
        page: Number(page),
        limit: Number(limit),
      });

      res.json({
        success: true,
        data: result.users,
        pagination: result.pagination,
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        message: "ì‚¬ìš©ì ëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",
      });
    }
  }

  async createUser(req: Request, res: Response): Promise<void> {
    try {
      const userData = req.body;
      const newUser = await this.userService.createUser(userData);

      res.status(201).json({
        success: true,
        message: "ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.",
        data: newUser,
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        message: "ì‚¬ìš©ì ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",
      });
    }
  }
}
```

### 3. Service Layer (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)

```typescript
// src/services/UserService.ts
export class UserService {
  private userModel: UserModel;

  constructor(userModel: UserModel) {
    this.userModel = userModel;
  }

  async getUsers(options: UserQueryOptions): Promise<PaginationResult> {
    const { page, limit } = options;
    const offset = (page - 1) * limit;

    const users = await this.userModel.findAll();
    const totalUsers = users.length;
    const paginatedUsers = users.slice(offset, offset + limit);

    return {
      users: paginatedUsers,
      pagination: {
        currentPage: page,
        totalPages: Math.ceil(totalUsers / limit),
        totalUsers,
        hasNext: page < Math.ceil(totalUsers / limit),
        hasPrev: page > 1,
      },
    };
  }

  async createUser(userData: Omit<User, "id">): Promise<User> {
    return this.userModel.create(userData);
  }
}
```

### 4. View Layer (í…œí”Œë¦¿)

```html
<!-- src/views/users/index.ejs -->
<!DOCTYPE html>
<html lang="ko">
  <head>
    <title>ì‚¬ìš©ì ëª©ë¡</title>
  </head>
  <body>
    <div class="container">
      <h1>ì‚¬ìš©ì ê´€ë¦¬</h1>

      <table class="user-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>ì´ë¦„</th>
            <th>ì´ë©”ì¼</th>
            <th>ì—­í• </th>
            <th>ì‘ì—…</th>
          </tr>
        </thead>
        <tbody>
          <% users.forEach(user => { %>
          <tr>
            <td><%= user.id %></td>
            <td><%= user.name %></td>
            <td><%= user.email %></td>
            <td><%= user.role %></td>
            <td>
              <button onclick="editUser('<%= user.id %>')">ìˆ˜ì •</button>
              <button onclick="deleteUser('<%= user.id %>')">ì‚­ì œ</button>
            </td>
          </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </body>
</html>
```

### 5. Routes (ë¼ìš°íŒ…)

```typescript
// src/routes/userRoutes.ts
const router = Router();

const userModel = new UserModel(/* database connection */);
const userService = new UserService(userModel);
const userController = new UserController(userService);

router.get("/", userController.getUsers.bind(userController));
router.post("/", userController.createUser.bind(userController));

export default router;
```

## ğŸ¯ MVCì˜ ì¥ì 

### 1. ê´€ì‹¬ì‚¬ ë¶„ë¦¬

- **Model**: ë°ì´í„°ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- **View**: UI í‘œí˜„
- **Controller**: ìš”ì²­ ì²˜ë¦¬ì™€ íë¦„ ì œì–´

### 2. ì½”ë“œ ì¬ì‚¬ìš©ì„±

- Modelì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì—¬ëŸ¬ Controllerì—ì„œ ì¬ì‚¬ìš©
- View í…œí”Œë¦¿ì„ ì—¬ëŸ¬ Controllerì—ì„œ ì¬ì‚¬ìš©

### 3. ìœ ì§€ë³´ìˆ˜ì„±

- ê° ê³„ì¸µì˜ ë…ë¦½ì ì¸ ìˆ˜ì • ê°€ëŠ¥
- ë³€ê²½ ì‚¬í•­ì˜ ì˜í–¥ ë²”ìœ„ ìµœì†Œí™”

### 4. í…ŒìŠ¤íŠ¸ ìš©ì´ì„±

- ê° ê³„ì¸µì„ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- Mock ê°ì²´ë¥¼ ì‚¬ìš©í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± ìš©ì´

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. Controllerì˜ ë³µì¡ì„±

- Controllerê°€ ë„ˆë¬´ ë³µì¡í•´ì§€ë©´ ì˜¤íˆë ¤ ìœ ì§€ë³´ìˆ˜ì„± ì €í•˜
- Service ê³„ì¸µì„ í™œìš©í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬

### 2. Viewì™€ Modelì˜ ê²°í•©

- Viewì—ì„œ ì§ì ‘ Modelì— ì ‘ê·¼í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜
- Controllerë¥¼ í†µí•œ ë°ì´í„° ì „ë‹¬ ìœ ì§€

### 3. ì„±ëŠ¥ ê³ ë ¤

- ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ìµœì í™”
- ìºì‹± ì „ëµ ìˆ˜ë¦½

## ğŸš€ ê³ ê¸‰ íŒ¨í„´

### 1. Repository Pattern

```typescript
// ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì„ ì¶”ìƒí™”
export interface IUserRepository {
  findAll(): Promise<User[]>;
  findById(id: string): Promise<User | null>;
  create(user: User): Promise<User>;
}
```

### 2. Dependency Injection

```typescript
// ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•œ ê²°í•©ë„ ê°ì†Œ
export class UserController {
  constructor(private userService: IUserService, private logger: ILogger) {}
}
```

## ğŸ“š ê²°ë¡ 

MVCëŠ” ì „í†µì ì´ë©´ì„œë„ ê°•ë ¥í•œ ì•„í‚¤í…ì²˜ íŒ¨í„´ì…ë‹ˆë‹¤.

ì ì ˆíˆ ì ìš©í•˜ë©´:

- **ëª…í™•í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬**ë¡œ ì½”ë“œì˜ ê°€ë…ì„± í–¥ìƒ
- **ë†’ì€ ì¬ì‚¬ìš©ì„±**ìœ¼ë¡œ ê°œë°œ íš¨ìœ¨ì„± ì¦ëŒ€
- **ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ**ìœ¼ë¡œ ì¥ê¸°ì ì¸ í”„ë¡œì íŠ¸ ê´€ë¦¬ ìš©ì´
- **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**ìœ¼ë¡œ ì½”ë“œ í’ˆì§ˆ í–¥ìƒ

í”„ë¡œì íŠ¸ì˜ ê·œëª¨ì™€ ë³µì¡ì„±ì„ ê³ ë ¤í•˜ì—¬ MVCë¥¼ ì ìš©í•˜ì—¬ íš¨ìœ¨ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ë¥¼ êµ¬ì¶•í•˜ì„¸ìš”.
