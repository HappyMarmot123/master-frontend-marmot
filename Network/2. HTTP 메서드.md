# HTTP 메서드

## 개요

HTTP 메서드는 클라이언트가 서버에 요청할 때 수행하고자 하는 동작을 명시하는 방법입니다. RESTful API 설계에서 중요한 역할을 합니다.

## 주요 HTTP 메서드

### 1. GET

**리소스 조회** - 서버로부터 데이터를 가져오는 메서드

#### 특징

- **안전성**: 서버의 상태를 변경하지 않음
- **멱등성**: 여러 번 호출해도 동일한 결과
- **캐시 가능**: 응답을 캐시할 수 있음
- **URL 길이 제한**: 쿼리 파라미터가 URL에 노출

#### 사용 예시

GET 메서드는 웹 API에서 가장 많이 사용되는 메서드로, 데이터 조회, 검색, 필터링 등 다양한 용도로 활용됩니다. RESTful API 설계에서는 리소스의 상태를 변경하지 않고 정보만 가져오는 용도로 사용합니다.

**GET 메서드의 주요 활용 사례:**

- **단일 리소스 조회**: 특정 ID를 가진 사용자, 상품, 게시글 등 조회
- **리소스 목록 조회**: 사용자 목록, 상품 카탈로그, 게시글 목록 등 조회
- **검색 및 필터링**: 카테고리, 가격, 날짜 등 조건에 따른 데이터 검색
- **페이지네이션**: 대량의 데이터를 페이지 단위로 나누어 조회

**실제 적용 예시:**

```http
# 사용자 정보 조회
GET /api/users/123 HTTP/1.1
Host: api.example.com
Authorization: Bearer token123

# 검색 및 필터링
GET /api/products?category=electronics&price_min=100&price_max=500 HTTP/1.1
Host: api.example.com

# 페이지네이션
GET /api/articles?page=2&limit=10 HTTP/1.1
Host: api.example.com
```

#### 응답 예시

```http
HTTP/1.1 200 OK
Content-Type: application/json
Cache-Control: max-age=3600

{
  "id": 123,
  "name": "John Doe",
  "email": "john@example.com",
  "created_at": "2024-01-15T10:00:00Z"
}
```

### 2. POST

**리소스 생성** - 서버에 새로운 데이터를 전송하는 메서드

#### 특징

- **안전성**: 서버의 상태를 변경함
- **멱등성**: 여러 번 호출하면 다른 결과 (새로운 리소스 생성)
- **캐시 불가능**: 응답을 캐시할 수 없음
- **요청 본문**: 데이터를 요청 본문에 포함

#### 사용 예시

POST 메서드는 새로운 리소스를 생성하거나 서버에 데이터를 전송할 때 사용됩니다. RESTful API에서는 주로 리소스 생성, 파일 업로드, 폼 제출 등에 활용됩니다.

**POST 메서드의 주요 활용 사례:**

- **리소스 생성**: 새로운 사용자 계정, 게시글, 주문 등 생성
- **파일 업로드**: 이미지, 문서, 동영상 등 파일 데이터 전송
- **폼 제출**: 로그인, 회원가입, 문의하기 등 사용자 입력 데이터 처리
- **데이터 처리**: 계산, 변환, 검증 등 서버에서 처리해야 하는 작업

**실제 적용 예시:**

```http
# 새 사용자 생성
POST /api/users HTTP/1.1
Host: api.example.com
Content-Type: application/json
Authorization: Bearer token123

{
  "name": "Jane Doe",
  "email": "jane@example.com",
  "password": "securepassword123"
}

# 파일 업로드
POST /api/upload HTTP/1.1
Host: api.example.com
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
Authorization: Bearer token123

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="document.pdf"
Content-Type: application/pdf

[파일 바이너리 데이터]
------WebKitFormBoundary7MA4YWxkTrZu0gW--
```

#### 응답 예시

```http
HTTP/1.1 201 Created
Content-Type: application/json
Location: /api/users/124

{
  "id": 124,
  "name": "Jane Doe",
  "email": "jane@example.com",
  "created_at": "2024-01-15T11:00:00Z"
}
```

### 3. PUT

**리소스 전체 교체** - 기존 리소스를 완전히 새로운 데이터로 교체

#### 특징

- **안전성**: 서버의 상태를 변경함
- **멱등성**: 여러 번 호출해도 동일한 결과
- **캐시 불가능**: 응답을 캐시할 수 없음
- **전체 교체**: 리소스의 모든 필드를 포함해야 함

#### 사용 예시

```http
# 사용자 정보 전체 교체
PUT /api/users/123 HTTP/1.1
Host: api.example.com
Content-Type: application/json
Authorization: Bearer token123

{
  "name": "John Smith",
  "email": "john.smith@example.com",
  "age": 30,
  "phone": "+1-555-0123"
}
```

#### 응답 예시

```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "id": 123,
  "name": "John Smith",
  "email": "john.smith@example.com",
  "age": 30,
  "phone": "+1-555-0123",
  "updated_at": "2024-01-15T12:00:00Z"
}
```

### 4. PATCH

**리소스 부분 수정** - 기존 리소스의 일부만 수정

#### 특징

- **안전성**: 서버의 상태를 변경함
- **멱등성**: 여러 번 호출해도 동일한 결과
- **캐시 불가능**: 응답을 캐시할 수 없음
- **부분 수정**: 변경할 필드만 포함

#### 사용 예시

```http
# 사용자 이메일만 수정
PATCH /api/users/123 HTTP/1.1
Host: api.example.com
Content-Type: application/json
Authorization: Bearer token123

{
  "email": "newemail@example.com"
}

# 여러 필드 부분 수정
PATCH /api/users/123 HTTP/1.1
Host: api.example.com
Content-Type: application/json
Authorization: Bearer token123

{
  "age": 31,
  "phone": "+1-555-0124"
}
```

#### 응답 예시

```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "id": 123,
  "name": "John Smith",
  "email": "newemail@example.com",
  "age": 31,
  "phone": "+1-555-0124",
  "updated_at": "2024-01-15T13:00:00Z"
}
```

### 5. DELETE

**리소스 삭제** - 서버에서 리소스를 제거

#### 특징

- **안전성**: 서버의 상태를 변경함
- **멱등성**: 여러 번 호출해도 동일한 결과
- **캐시 불가능**: 응답을 캐시할 수 없음
- **영구 삭제**: 일반적으로 리소스를 완전히 제거

#### 사용 예시

```http
# 사용자 삭제
DELETE /api/users/123 HTTP/1.1
Host: api.example.com
Authorization: Bearer token123

# 특정 주문 항목 삭제
DELETE /api/orders/456/items/789 HTTP/1.1
Host: api.example.com
Authorization: Bearer token123
```

#### 응답 예시

```http
HTTP/1.1 204 No Content
```

### 6. HEAD

**헤더만 조회** - GET과 동일하지만 응답 본문 없이 헤더만 반환

#### 특징

- **안전성**: 서버의 상태를 변경하지 않음
- **멱등성**: 여러 번 호출해도 동일한 결과
- **캐시 가능**: 응답을 캐시할 수 있음
- **메타데이터 확인**: 파일 크기, 수정 시간 등 확인

#### 사용 예시

```http
# 파일 정보 확인
HEAD /api/files/document.pdf HTTP/1.1
Host: api.example.com
Authorization: Bearer token123
```

#### 응답 예시

```http
HTTP/1.1 200 OK
Content-Type: application/pdf
Content-Length: 1048576
Last-Modified: Wed, 15 Jan 2024 10:00:00 GMT
ETag: "abc123"
```

### 7. OPTIONS

**지원하는 메서드 확인** - 서버가 지원하는 HTTP 메서드나 CORS 정보 확인

#### 특징

- **안전성**: 서버의 상태를 변경하지 않음
- **멱등성**: 여러 번 호출해도 동일한 결과
- **CORS**: 브라우저의 CORS 요청에서 자동으로 사용
- **API 문서**: 지원하는 메서드 정보 제공

#### 사용 예시

```http
# 지원하는 메서드 확인
OPTIONS /api/users HTTP/1.1
Host: api.example.com
Origin: https://example.com
Access-Control-Request-Method: POST
Access-Control-Request-Headers: Content-Type
```

#### 응답 예시

```http
HTTP/1.1 200 OK
Allow: GET, POST, PUT, DELETE, PATCH
Access-Control-Allow-Origin: https://example.com
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, PATCH
Access-Control-Allow-Headers: Content-Type, Authorization
Access-Control-Max-Age: 86400
```

## HTTP 메서드 선택 가이드

### 1. 리소스 조회

- **GET**: 단일 리소스 또는 리소스 목록 조회
- **HEAD**: 리소스 메타데이터만 필요할 때

### 2. 리소스 생성

- **POST**: 새로운 리소스 생성
- **PUT**: 특정 ID로 리소스 생성 (클라이언트가 ID 지정)

### 3. 리소스 수정

- **PUT**: 리소스 전체 교체
- **PATCH**: 리소스 부분 수정

### 4. 리소스 삭제

- **DELETE**: 리소스 제거

### 5. API 정보 확인

- **OPTIONS**: 지원하는 메서드 확인

## RESTful API 설계 원칙

### 1. 리소스 중심 설계

```http
# 좋은 예
GET    /api/users          # 사용자 목록 조회
POST   /api/users          # 새 사용자 생성
GET    /api/users/123      # 특정 사용자 조회
PUT    /api/users/123      # 사용자 전체 교체
PATCH  /api/users/123      # 사용자 부분 수정
DELETE /api/users/123      # 사용자 삭제

# 나쁜 예
GET    /api/getUsers
POST   /api/createUser
PUT    /api/updateUser
DELETE /api/removeUser
```

### 2. HTTP 상태 코드 활용

```http
# 성공 응답
200 OK           # GET, PUT, PATCH 성공
201 Created      # POST 성공
204 No Content   # DELETE 성공

# 클라이언트 오류
400 Bad Request  # 잘못된 요청
401 Unauthorized # 인증 필요
403 Forbidden    # 접근 금지
404 Not Found    # 리소스 없음

# 서버 오류
500 Internal Server Error # 서버 내부 오류
```

### 3. 일관된 응답 형식

```json
{
  "success": true,
  "data": {
    "id": 123,
    "name": "John Doe"
  },
  "message": "User created successfully",
  "timestamp": "2024-01-15T10:00:00Z"
}
```

## 요약

HTTP 메서드는 웹 API의 동작을 명확하게 정의하는 중요한 요소입니다. 각 메서드의 특성과 사용법을 이해하고, RESTful API 설계 원칙에 따라 적절히 활용하는 것이 중요합니다.
