# EC2 인스턴스 유형

## 개요
EC2 인스턴스는 다양한 워크로드 요구사항에 맞춰 최적화된 여러 인스턴스 패밀리와 유형을 제공합니다. 각 인스턴스 유형은 CPU, 메모리, 스토리지, 네트워크 성능이 다릅니다.

## 핵심 개념

### 인스턴스 패밀리
**정의**: 특정 워크로드 유형에 최적화된 인스턴스 그룹

**주요 패밀리**:
- **범용 (General Purpose)**: 균형잡힌 리소스
- **컴퓨팅 최적화 (Compute Optimized)**: CPU 집약적 워크로드
- **메모리 최적화 (Memory Optimized)**: 메모리 집약적 워크로드
- **스토리지 최적화 (Storage Optimized)**: 높은 스토리지 성능
- **가속 컴퓨팅 (Accelerated Computing)**: GPU, FPGA 등

### 인스턴스 크기
**정의**: 각 패밀리 내에서 리소스 크기

**크기 예시**:
- nano, micro, small, medium
- large, xlarge
- 2xlarge, 4xlarge, 8xlarge, ...

**리소스 증가**:
- 각 크기가 이전 크기의 약 2배
- CPU, 메모리, 네트워크 성능 증가

## 범용 인스턴스 (General Purpose)

### M 시리즈
**특징**:
- CPU와 메모리 균형
- 다양한 워크로드에 적합
- 가장 널리 사용됨

**사용 사례**:
- 웹 서버
- 애플리케이션 서버
- 중소규모 데이터베이스
- 개발/테스트 환경

**예시**:
- **m5.large**: 2 vCPU, 8GB 메모리
- **m5.xlarge**: 4 vCPU, 16GB 메모리
- **m5.2xlarge**: 8 vCPU, 32GB 메모리

### T 시리즈 (버스터블)
**특징**:
- 버스터블 성능
- 기본 성능 + 버스트 가능
- 비용 효율적

**버스트 메커니즘**:
- CPU 크레딧 축적
- 필요 시 버스트 사용
- 지속적인 고부하는 부적합

**사용 사례**:
- 개발/테스트 환경
- 소규모 웹사이트
- 마이크로서비스
- 배치 작업

**주의사항**:
- 지속적인 고부하 시 CPU 크레딧 고갈
- 크레딧 고갈 시 성능 제한

## 컴퓨팅 최적화 인스턴스

### C 시리즈
**특징**:
- 높은 CPU 성능
- 높은 네트워크 성능
- 메모리는 상대적으로 적음

**사용 사례**:
- 고성능 컴퓨팅 (HPC)
- 과학 컴퓨팅
- 게임 서버
- 배치 처리
- 웹 서버 (CPU 집약적)

**예시**:
- **c5.large**: 2 vCPU, 4GB 메모리
- **c5.xlarge**: 4 vCPU, 8GB 메모리
- **c5.2xlarge**: 8 vCPU, 16GB 메모리

## 메모리 최적화 인스턴스

### R 시리즈
**특징**:
- 높은 메모리 대 CPU 비율
- 빠른 프로세서
- 대용량 메모리

**사용 사례**:
- 대규모 데이터베이스
- 인메모리 캐시
- 실시간 빅 데이터 분석
- 고성능 데이터베이스

**예시**:
- **r5.large**: 2 vCPU, 16GB 메모리
- **r5.xlarge**: 4 vCPU, 32GB 메모리
- **r5.2xlarge**: 8 vCPU, 64GB 메모리

### X 시리즈
**특징**:
- 매우 큰 메모리
- 최대 24TB 메모리 (x1e.32xlarge)

**사용 사례**:
- 대규모 인메모리 데이터베이스
- SAP HANA
- 매우 큰 데이터셋 처리

## 스토리지 최적화 인스턴스

### I 시리즈
**특징**:
- 높은 IOPS
- 로컬 NVMe SSD
- 높은 처리량

**사용 사례**:
- NoSQL 데이터베이스
- 데이터 웨어하우스
- 트랜잭션 처리 시스템
- 로그 처리

**예시**:
- **i3.large**: 2 vCPU, 15.25GB 메모리, 475GB NVMe SSD
- **i3.xlarge**: 4 vCPU, 30.5GB 메모리, 950GB NVMe SSD

### D 시리즈
**특징**:
- 높은 디스크 처리량
- 로컬 스토리지
- 데이터 집약적 워크로드

**사용 사례**:
- 빅 데이터 처리
- 데이터 웨어하우스
- 로그 분석

## 가속 컴퓨팅 인스턴스

### P 시리즈 (GPU)
**특징**:
- NVIDIA GPU
- 높은 컴퓨팅 성능
- 병렬 처리

**사용 사례**:
- 머신러닝
- 딥러닝
- 과학 컴퓨팅
- 렌더링

**예시**:
- **p3.2xlarge**: 8 vCPU, 61GB 메모리, 1x NVIDIA V100 GPU

### G 시리즈 (GPU)
**특징**:
- 그래픽 최적화 GPU
- 그래픽 워크로드

**사용 사례**:
- 3D 렌더링
- 비디오 인코딩
- 그래픽 애플리케이션

## 인스턴스 유형 선택 기준

### 1. 워크로드 특성 분석

#### CPU 집약적
**특징**: 높은 CPU 사용률
**선택**: C 시리즈
**예시**: 과학 컴퓨팅, 배치 처리

#### 메모리 집약적
**특징**: 높은 메모리 사용률
**선택**: R 시리즈, X 시리즈
**예시**: 대규모 데이터베이스, 인메모리 캐시

#### I/O 집약적
**특징**: 높은 디스크 I/O
**선택**: I 시리즈, D 시리즈
**예시**: 데이터베이스, 로그 처리

#### 균형잡힌 워크로드
**특징**: CPU와 메모리 균형
**선택**: M 시리즈
**예시**: 웹 서버, 애플리케이션 서버

### 2. 성능 요구사항

#### 예측 가능한 워크로드
**선택**: 온디맨드 인스턴스
**특징**: 일관된 성능

#### 가변적인 워크로드
**선택**: T 시리즈 (버스터블)
**특징**: 버스트 가능, 비용 효율적

#### 매우 높은 성능
**선택**: C, R, I 시리즈
**특징**: 최적화된 성능

### 3. 비용 고려사항

#### 비용 최적화
- T 시리즈 (버스터블)
- 예약형 인스턴스
- 스팟 인스턴스

#### 성능 우선
- C, R, I 시리즈
- 온디맨드 인스턴스

## 인스턴스 세대

### 현재 세대 (예: m5)
**특징**:
- 최신 하드웨어
- 최적화된 성능
- 권장 사용

### 이전 세대 (예: m4)
**특징**:
- 구형 하드웨어
- 낮은 성능
- 마이그레이션 권장

### 네이밍 규칙
```
m5.large
│ │
│ └─ 크기
└─── 패밀리 및 세대
```

## 인스턴스 구매 옵션

### 1. 온디맨드 (On-Demand)
**특징**:
- 시간당 비용 지불
- 약정 없음
- 가장 유연함

**사용 사례**:
- 예측 불가능한 워크로드
- 단기 프로젝트

### 2. 예약형 (Reserved)
**특징**:
- 1년 또는 3년 약정
- 최대 72% 할인
- 예측 가능한 워크로드

**유형**:
- **Standard**: 가장 높은 할인
- **Convertible**: 인스턴스 유형 변경 가능
- **Scheduled**: 특정 시간대에만 실행

### 3. 스팟 (Spot)
**특징**:
- 최대 90% 할인
- 중단 가능 (2분 경고)
- 유연한 워크로드

**사용 사례**:
- 배치 작업
- 빅 데이터 분석
- CI/CD 파이프라인

### 4. Savings Plans
**특징**:
- 1년 또는 3년 약정
- 유연한 인스턴스 유형
- 최대 72% 할인

## 인스턴스 성능 최적화

### 1. EBS 최적화
**정의**: EBS I/O 성능을 최적화한 인스턴스

**특징**:
- 전용 네트워크 대역폭
- 일관된 성능
- 추가 비용 없음

**인스턴스 유형**:
- 대부분의 최신 인스턴스 유형
- C, M, R 시리즈 등

### 2. 향상된 네트워킹
**정의**: 네트워크 성능 향상

**특징**:
- 낮은 지연 시간
- 높은 패킷 처리량
- 일관된 성능

**구현**:
- **SR-IOV**: 단일 루트 I/O 가상화
- **ENA**: Elastic Network Adapter

### 3. 배치 그룹 (Placement Group)
**정의**: 인스턴스 배치 전략

**유형**:
- **Cluster**: 같은 랙에 배치 (낮은 지연 시간)
- **Spread**: 다른 하드웨어에 분산 (고가용성)
- **Partition**: 논리적 파티션 (대규모 배포)

## 실제 선택 예시

### 예시 1: 웹 애플리케이션
```
요구사항:
- 중간 트래픽
- CPU와 메모리 균형
- 비용 효율적

선택: m5.large 또는 t3.medium
```

### 예시 2: 데이터베이스
```
요구사항:
- 높은 메모리
- 높은 IOPS
- 일관된 성능

선택: r5.xlarge + io1 볼륨
```

### 예시 3: 과학 컴퓨팅
```
요구사항:
- 높은 CPU 성능
- 병렬 처리
- 높은 네트워크 성능

선택: c5.2xlarge 또는 c5n.2xlarge
```

### 예시 4: 머신러닝
```
요구사항:
- GPU 필요
- 높은 컴퓨팅 성능
- 대용량 메모리

선택: p3.2xlarge 또는 p3.8xlarge
```

## 모범 사례

### 1. 적절한 크기 선택
- 워크로드 분석
- CloudWatch 지표 확인
- 오버프로비저닝 방지

### 2. 비용 최적화
- 예약형 인스턴스 활용
- 스팟 인스턴스 활용 (가능한 경우)
- 불필요한 인스턴스 종료

### 3. 성능 모니터링
- CloudWatch 지표 추적
- CPU, 메모리, 네트워크 모니터링
- 병목 지점 식별

### 4. 유연성 유지
- Auto Scaling 활용
- 다양한 인스턴스 유형 테스트
- 필요 시 변경

## 관련 서비스

### Auto Scaling
- 워크로드에 따라 인스턴스 자동 조정
- 다양한 인스턴스 유형 혼합 가능

### CloudWatch
- 인스턴스 성능 모니터링
- 지표 수집 및 분석

### EBS
- 인스턴스 스토리지
- 볼륨 유형 선택

## 참고 자료
- [EC2 인스턴스 유형](https://aws.amazon.com/ec2/instance-types/)
- [인스턴스 선택 가이드](https://aws.amazon.com/ec2/instance-selector/)

