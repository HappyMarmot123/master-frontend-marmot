# 로드 밸런서 비교 (ALB, NLB, GLB)

## 개요
AWS는 세 가지 유형의 로드 밸런서를 제공합니다: Application Load Balancer (ALB), Network Load Balancer (NLB), Gateway Load Balancer (GLB). 각각 다른 계층과 사용 사례에 최적화되어 있습니다.

## 로드 밸런서 유형

### 1. Application Load Balancer (ALB)

#### ALB란?
**정의**: OSI 7계층 (애플리케이션 계층)에서 작동하는 로드 밸런서

**특징**:
- HTTP/HTTPS 트래픽
- 콘텐츠 기반 라우팅
- 호스트 기반 라우팅
- 경로 기반 라우팅

**작동 원리**:
```
클라이언트
  ↓ (HTTP/HTTPS 요청)
ALB
  ├── 요청 내용 분석
  ├── 라우팅 규칙 적용
  └── 대상 그룹으로 전달
  ↓
EC2, ECS, Lambda 등
```

#### 주요 기능
**1. 콘텐츠 기반 라우팅**:
- URL 경로 기반
- 호스트 헤더 기반
- HTTP 헤더 기반
- 쿼리 문자열 기반

**2. 타겟 그룹**:
- EC2 인스턴스
- IP 주소
- Lambda 함수
- ECS 작업

**3. 고급 기능**:
- WebSocket 지원
- HTTP/2 지원
- SSL/TLS 종료
- 리다이렉션

#### 사용 사례
- 웹 애플리케이션
- 마이크로서비스
- 컨테이너 기반 애플리케이션
- Lambda 함수

### 2. Network Load Balancer (NLB)

#### NLB란?
**정의**: OSI 4계층 (전송 계층)에서 작동하는 로드 밸런서

**특징**:
- TCP/UDP 트래픽
- 초고성능
- 낮은 지연 시간
- 정적 IP 주소

**작동 원리**:
```
클라이언트
  ↓ (TCP/UDP 연결)
NLB
  ├── 연결 수준에서 라우팅
  └── 대상으로 전달
  ↓
EC2, IP 주소 등
```

#### 주요 기능
**1. 고성능**:
- 초당 수백만 요청 처리
- 초고속 처리량
- 낮은 지연 시간

**2. 정적 IP**:
- Elastic IP 할당 가능
- IP 화이트리스트에 추가 가능

**3. 연결 기반 라우팅**:
- TCP/UDP 연결 유지
- 세션 어피니티

#### 사용 사례
- 고성능 애플리케이션
- 게임 서버
- 실시간 스트리밍
- IoT 애플리케이션

### 3. Gateway Load Balancer (GLB)

#### GLB란?
**정의**: 네트워크 게이트웨이 역할을 하는 로드 밸런서

**특징**:
- 3계층 (네트워크 계층)
- 트래픽을 가상 어플라이언스로 라우팅
- 투명 네트워크 게이트웨이

**작동 원리**:
```
VPC 트래픽
  ↓
Gateway Load Balancer
  ├── 트래픽을 가상 어플라이언스로 라우팅
  ├── 검사/보안 처리
  └── 원래 경로로 반환
```

#### 주요 기능
**1. 가상 어플라이언스 통합**:
- 방화벽
- 침입 탐지 시스템
- 딥 패킷 검사

**2. 투명 게이트웨이**:
- 라우팅 테이블에 추가
- 모든 트래픽 자동 라우팅

**3. 고가용성**:
- 여러 가상 어플라이언스 지원
- 자동 장애 조치

#### 사용 사례
- 네트워크 보안
- 침입 탐지
- 트래픽 검사
- 규정 준수

## 로드 밸런서 비교

### 비교표

| 항목 | ALB | NLB | GLB |
|------|-----|-----|-----|
| **계층** | 7계층 (애플리케이션) | 4계층 (전송) | 3계층 (네트워크) |
| **프로토콜** | HTTP/HTTPS | TCP/UDP/TLS | IP 패킷 |
| **성능** | 높음 | 매우 높음 | 높음 |
| **지연 시간** | 낮음 | 매우 낮음 | 낮음 |
| **콘텐츠 기반 라우팅** | 지원 | 미지원 | 미지원 |
| **정적 IP** | 미지원 | 지원 | 지원 |
| **SSL/TLS 종료** | 지원 | 지원 | 미지원 |
| **WebSocket** | 지원 | 지원 | 미지원 |
| **Lambda 통합** | 지원 | 미지원 | 미지원 |
| **사용 사례** | 웹 애플리케이션 | 고성능 애플리케이션 | 네트워크 보안 |

### 선택 기준

#### ALB를 선택하는 경우
- HTTP/HTTPS 트래픽
- 콘텐츠 기반 라우팅 필요
- 마이크로서비스 아키텍처
- Lambda 함수 통합

#### NLB를 선택하는 경우
- TCP/UDP 트래픽
- 최고 성능 필요
- 낮은 지연 시간 필요
- 정적 IP 필요

#### GLB를 선택하는 경우
- 네트워크 보안 필요
- 가상 어플라이언스 통합
- 트래픽 검사 필요
- 투명 게이트웨이 필요

## 실제 사용 예시

### 예시 1: 웹 애플리케이션
```
인터넷
  ↓
ALB
  ├── /api → API 서버
  ├── /web → 웹 서버
  └── /static → S3
```

### 예시 2: 고성능 게임 서버
```
게이머
  ↓
NLB (정적 IP)
  ↓
게임 서버 (여러 AZ)
```

### 예시 3: 네트워크 보안
```
VPC 트래픽
  ↓
Gateway Load Balancer
  ↓
방화벽 어플라이언스
  ↓
검사 후 통과
```

## 모범 사례

### 1. 고가용성
- 여러 AZ에 배치
- Health Check 설정
- 자동 장애 조치

### 2. 보안
- 보안 그룹으로 액세스 제어
- SSL/TLS 인증서 사용
- WAF 통합 (ALB)

### 3. 성능
- 적절한 로드 밸런서 선택
- 타겟 그룹 최적화
- 연결 드레이닝

### 4. 모니터링
- CloudWatch 지표 모니터링
- 액세스 로그 분석
- 성능 추적

## 관련 서비스

### Auto Scaling
- 로드 밸런서와 통합
- 자동 확장

### Route 53
- DNS와 통합
- Health Check

### WAF
- ALB와 통합
- 웹 보안

## 참고 자료
- [로드 밸런서 비교](https://docs.aws.amazon.com/elasticloadbalancing/latest/userguide/introduction.html)
- [ALB 공식 문서](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/)
- [NLB 공식 문서](https://docs.aws.amazon.com/elasticloadbalancing/latest/network/)
- [GLB 공식 문서](https://docs.aws.amazon.com/elasticloadbalancing/latest/gateway/)

