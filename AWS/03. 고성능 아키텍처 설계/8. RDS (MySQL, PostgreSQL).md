# RDS (MySQL, PostgreSQL)

## 개요
Amazon RDS (Relational Database Service)는 관계형 데이터베이스를 쉽게 설정, 운영, 확장할 수 있는 관리형 서비스입니다.

## 핵심 개념

### 지원 데이터베이스 엔진
- **MySQL**: 오픈소스 관계형 데이터베이스
- **PostgreSQL**: 고급 오픈소스 관계형 데이터베이스
- **MariaDB**: MySQL 포크
- **Oracle**: 상용 데이터베이스
- **SQL Server**: Microsoft 데이터베이스
- **Aurora**: AWS 최적화 데이터베이스

### 인스턴스 클래스

#### 1. 범용 (General Purpose)
- **T 시리즈**: 버스터블 성능 (개발/테스트)
- **M 시리즈**: 범용 워크로드 (프로덕션)

#### 2. 컴퓨팅 최적화
- **C 시리즈**: CPU 집약적 워크로드

#### 3. 메모리 최적화
- **R 시리즈**: 메모리 집약적 워크로드
- **X 시리즈**: 매우 큰 메모리

#### 4. 스토리지 최적화
- **I 시리즈**: 높은 IOPS 요구사항

## 주요 기능

### 1. Multi-AZ 배포
- **목적**: 고가용성 및 자동 장애 조치
- **구현**: 다른 AZ에 동기식 대기 인스턴스
- **장애 조치**: 자동 (약 60-120초)
- **비용**: 단일 AZ 대비 약 2배

### 2. 읽기 전용 복제본 (Read Replica)
- **목적**: 읽기 성능 향상 및 재해 복구
- **구현**: 비동기 복제
- **용도**:
  - 읽기 집약적 워크로드 분산
  - 다른 리전에 DR 구성
  - 백업 및 보고서 생성

### 3. 자동 백업
- **백업 기간**: 최대 35일
- **백업 윈도우**: 유지 관리 윈도우와 분리
- **Point-in-Time Recovery**: 특정 시점으로 복원
- **스냅샷**: 수동 스냅샷 (무제한 보관)

### 4. 자동 패치
- **자동 업그레이드**: 유지 관리 윈도우에 적용
- **즉시 적용**: 중요 보안 패치
- **Multi-AZ**: 자동 장애 조치 후 패치

### 5. 암호화
- **저장 데이터**: KMS를 사용한 암호화
- **전송 중**: SSL/TLS 연결
- **제한**: 생성 시에만 활성화 가능

## 사용 사례

### 1. 웹 애플리케이션
- 트랜잭션 데이터 저장
- 사용자 인증 정보
- 세션 데이터

### 2. 전자상거래
- 주문 정보
- 제품 카탈로그
- 고객 정보

### 3. 콘텐츠 관리
- 블로그, CMS
- 사용자 생성 콘텐츠
- 메타데이터 저장

## 시험 포인트

1. **Multi-AZ vs Read Replica**
   - **Multi-AZ**: 고가용성, 자동 장애 조치, 동기 복제
   - **Read Replica**: 읽기 성능, 수동 승격, 비동기 복제
   - **조합 가능**: Multi-AZ Primary + Read Replica

2. **백업 및 복원**
   - **자동 백업**: 최대 35일, PITR 가능
   - **스냅샷**: 수동, 무제한 보관
   - **복원**: 새 인스턴스 생성

3. **암호화**
   - **생성 시 활성화**: 후에 변경 불가
   - **암호화된 스냅샷**: 암호화된 인스턴스 생성
   - **읽기 전용 복제본**: 원본과 동일한 암호화 키

4. **성능 최적화**
   - **읽기 전용 복제본**: 읽기 집약적 워크로드
   - **프로비저닝된 IOPS**: 예측 가능한 성능
   - **파라미터 그룹**: 데이터베이스 설정 최적화

5. **비용 최적화**
   - **예약형 인스턴스**: 장기 사용 시 할인
   - **스토리지 자동 확장**: 필요 시 자동 증가
   - **스토리지 최적화**: gp3 (기본) vs io1 (고성능)

## 모범 사례

1. **고가용성**
   - 프로덕션: Multi-AZ 필수
   - 읽기 전용 복제본으로 읽기 분산
   - 여러 리전에 읽기 전용 복제본

2. **보안**
   - 생성 시 암호화 활성화
   - 보안 그룹으로 네트워크 액세스 제어
   - IAM 데이터베이스 인증 (PostgreSQL, MySQL 8.0+)

3. **백업**
   - 자동 백업 활성화
   - 정기적인 스냅샷 생성
   - 다른 리전에 스냅샷 복사

4. **모니터링**
   - CloudWatch 지표 모니터링
   - Enhanced Monitoring 활성화
   - Performance Insights로 성능 분석

5. **성능**
   - 적절한 인스턴스 클래스 선택
   - 읽기 전용 복제본으로 읽기 분산
   - 연결 풀링 (RDS Proxy)

## RDS 아키텍처 예시

### 고가용성 구성
```
Primary (Multi-AZ)
  ├─ Standby (다른 AZ)
  ├─ Read Replica 1 (같은 리전)
  └─ Read Replica 2 (다른 리전, DR)
```

### 읽기 분산
```
Application
  ├─ Write → Primary (Multi-AZ)
  └─ Read → Read Replica
```

## 관련 서비스
- **RDS Proxy**: 연결 풀링 및 장애 조치
- **CloudWatch**: 모니터링 및 알람
- **Secrets Manager**: 데이터베이스 자격 증명 관리
- **DMS**: 데이터베이스 마이그레이션

## 참고 자료
- [RDS 공식 문서](https://docs.aws.amazon.com/rds/)
- [RDS 모범 사례](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_BestPractices.html)
- [Multi-AZ 배포](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.MultiAZ.html)

