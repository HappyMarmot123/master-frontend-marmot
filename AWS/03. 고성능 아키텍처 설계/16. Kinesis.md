# Kinesis

## 개요
Amazon Kinesis는 실시간 스트리밍 데이터를 수집, 처리, 분석하는 완전 관리형 서비스입니다. 대규모 데이터 스트림을 실시간으로 처리할 수 있습니다.

## 핵심 개념

### Kinesis란?
**정의**: 실시간 스트리밍 데이터 처리 서비스

**주요 서비스**:
- **Kinesis Data Streams**: 실시간 데이터 스트리밍
- **Kinesis Data Firehose**: 데이터 전송 및 변환
- **Kinesis Data Analytics**: 스트림 분석
- **Kinesis Video Streams**: 비디오 스트리밍

**작동 원리**:
```
데이터 프로듀서
  ↓ (실시간 스트림)
Kinesis
  ↓ (처리)
데이터 컨슈머
```

## Kinesis Data Streams

### Data Streams란?
**정의**: 실시간 데이터 스트림을 수집하고 처리하는 서비스

**특징**:
- 실시간 처리
- 확장 가능
- 내구성 보장
- 여러 컨슈머 지원

**작동 원리**:
```
프로듀서
  ↓ (데이터 전송)
Kinesis Data Stream
  ├── 샤드 1
  ├── 샤드 2
  └── 샤드 3
  ↓ (데이터 읽기)
컨슈머
```

### 샤드 (Shard)
**정의**: 데이터 스트림의 기본 처리 단위

**특징**:
- 각 샤드는 초당 1MB 쓰기, 2MB 읽기 지원
- 샤드 수에 따라 처리량 결정
- 동적 확장 가능

**용량 계산**:
```
필요한 샤드 수 = (쓰기 처리량 / 1MB) 또는 (읽기 처리량 / 2MB) 중 큰 값
```

### 사용 사례
- 로그 수집 및 분석
- 실시간 모니터링
- 이벤트 스트리밍
- IoT 데이터 수집

## Kinesis Data Firehose

### Data Firehose란?
**정의**: 스트리밍 데이터를 AWS 데이터 스토어로 자동 전송하는 서비스

**특징**:
- 완전 관리형
- 자동 확장
- 데이터 변환 지원
- 배치 처리

**대상 서비스**:
- S3
- Redshift
- Elasticsearch
- Splunk
- HTTP 엔드포인트

**작동 원리**:
```
데이터 소스
  ↓
Kinesis Data Firehose
  ├── 데이터 변환 (선택)
  ├── 배치 처리
  └── 압축 (선택)
  ↓
대상 서비스 (S3, Redshift 등)
```

### 사용 사례
- 로그 데이터 아카이브
- 데이터 레이크 구축
- 실시간 분석
- 데이터 웨어하우스 로딩

## Kinesis Data Analytics

### Data Analytics란?
**정의**: 스트리밍 데이터를 실시간으로 분석하는 서비스

**특징**:
- SQL 기반 분석
- 실시간 처리
- 자동 확장
- 완전 관리형

**작동 원리**:
```
Kinesis Data Streams
  ↓
Kinesis Data Analytics
  ├── SQL 쿼리 실행
  ├── 실시간 분석
  └── 결과 출력
  ↓
대상 서비스
```

### 사용 사례
- 실시간 대시보드
- 이상 탐지
- 실시간 집계
- 스트림 변환

## Kinesis vs SQS 비교

### 비교표

| 항목 | Kinesis Data Streams | SQS |
|------|---------------------|-----|
| **목적** | 실시간 스트리밍 | 메시지 큐 |
| **순서 보장** | 샤드 내 순서 보장 | FIFO 큐만 순서 보장 |
| **여러 컨슈머** | 지원 | 단일 컨슈머 |
| **데이터 보관** | 최대 7일 | 최대 14일 |
| **처리량** | 샤드 수에 따라 결정 | 큐당 처리량 제한 |
| **사용 사례** | 실시간 스트리밍 | 비동기 메시징 |

### 선택 기준

#### Kinesis를 선택하는 경우
- 실시간 스트리밍 데이터
- 여러 컨슈머 필요
- 순서가 중요한 데이터
- 높은 처리량

#### SQS를 선택하는 경우
- 비동기 메시징
- 단일 컨슈머
- 간단한 큐
- 낮은 처리량

## 모범 사례

### 1. 샤드 수 계획
- 예상 처리량 계산
- 적절한 샤드 수 설정
- 필요 시 확장

### 2. 파티션 키 선택
- 고르게 분산되는 키 선택
- 핫 파티션 방지
- 데이터 특성 고려

### 3. 에러 처리
- 재시도 로직 구현
- Dead Letter Queue 사용
- 모니터링 및 알람

### 4. 비용 최적화
- 필요한 샤드 수만 사용
- 데이터 보관 기간 최적화
- 불필요한 스트림 제거

## 관련 서비스

### Lambda
- Kinesis 스트림 처리
- 실시간 데이터 변환

### S3
- 데이터 아카이브
- 데이터 레이크

### Redshift
- 데이터 웨어하우스
- 분석

## 참고 자료
- [Kinesis 공식 문서](https://docs.aws.amazon.com/kinesis/)
- [Kinesis Data Streams](https://docs.aws.amazon.com/streams/latest/dev/introduction.html)
- [Kinesis Data Firehose](https://docs.aws.amazon.com/firehose/latest/dev/what-is-this-service.html)

