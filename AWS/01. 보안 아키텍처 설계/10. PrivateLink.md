# PrivateLink

## 개요

PrivateLink는 VPC와 서비스 간 프라이빗 연결을 제공하는 서비스입니다. 전통적으로 VPC에서 AWS 서비스에 접근하려면 인터넷 게이트웨이를 통해 퍼블릭 엔드포인트로 접근해야 했는데, 이는 퍼블릭 인터넷 노출과 보안 위험을 초래했습니다. PrivateLink를 사용하면 VPC 엔드포인트를 통해 AWS 백본 네트워크로 프라이빗 연결을 구성할 수 있어 인터넷 노출 없이 높은 보안을 제공하며, 간단한 네트워크 아키텍처를 구성할 수 있습니다. 예를 들어, Gateway 엔드포인트를 통해 S3에 프라이빗 연결로 접근할 수 있습니다.

## PrivateLink 구성 요소

### 1. VPC 엔드포인트 (VPC Endpoint)

VPC 내에서 AWS 서비스에 프라이빗 연결을 제공하는 진입점입니다. 두 가지 유형이 있습니다:

#### Gateway 엔드포인트

특정 서비스(S3, DynamoDB)를 위한 게이트웨이입니다. 라우팅 테이블에 추가되며 무료로 제공되고, S3와 DynamoDB만 지원합니다.

#### Interface 엔드포인트

ENI를 통해 서비스에 연결합니다. 여러 서비스를 지원하며, 보안 그룹으로 제어할 수 있고, 시간당 비용이 발생합니다.

### 2. 엔드포인트 서비스 (Endpoint Service)

다른 VPC에서 접근할 수 있는 서비스입니다. NLB 또는 ALB를 통해 노출되며, 다른 계정에서 접근할 수 있고, 승인이 필요합니다.

PrivateLink를 사용하면 인터넷 노출 없이 프라이빗 연결을 통해 S3에 접근할 수 있어 데이터 전송 비용을 절감하고 높은 보안을 제공합니다. CloudWatch, Systems Manager, KMS, API Gateway (Private API) 등의 다른 AWS 서비스에도 Interface 엔드포인트를 통해 접근할 수 있습니다. 또한 VPC 간 연결을 위해 PrivateLink를 사용하면 VPC 피어링이 불필요하고, 간단한 네트워크 아키텍처를 구성할 수 있으며, 중앙 집중식 관리가 가능합니다. 온프레미스 환경도 Direct Connect나 VPN을 통해 VPC에 연결한 후 VPC 엔드포인트를 통해 AWS 서비스에 접근할 수 있습니다.

## Gateway 엔드포인트 vs Interface 엔드포인트

### 비교표

| 항목            | Gateway 엔드포인트 | Interface 엔드포인트            |
| --------------- | ------------------ | ------------------------------- |
| **지원 서비스** | S3, DynamoDB만     | 대부분의 AWS 서비스             |
| **구현**        | 라우팅 테이블      | ENI (Elastic Network Interface) |
| **비용**        | 무료               | 시간당 비용                     |
| **보안 그룹**   | 사용 안 함         | 사용 가능                       |
| **DNS**         | 자동               | 자동                            |

### 선택 기준

Gateway는 S3 또는 DynamoDB 접근이 필요하거나, 비용 최적화가 필요하거나, 간단한 구성을 원하는 경우에 사용합니다.

Interface 엔드포인트는 다른 AWS 서비스 접근이 필요하거나, 보안 그룹 제어가 필요하거나, VPC 간 연결이 필요한 경우에 사용합니다.

## PrivateLink 보안

PrivateLink는 인터넷을 거치지 않고 AWS 백본 네트워크를 사용하며, 퍼블릭 IP 주소가 불필요합니다. Interface 엔드포인트는 보안 그룹으로 액세스 제어를 수행하며, 최소 권한 원칙을 적용하여 세밀한 제어가 가능합니다. 또한 엔드포인트 정책을 통해 엔드포인트 사용을 제어하며, IAM 정책과 유사한 방식으로 액세스를 제한할 수 있습니다.
