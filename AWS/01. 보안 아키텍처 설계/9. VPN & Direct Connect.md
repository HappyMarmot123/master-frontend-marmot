# VPN & Direct Connect

## 개요

AWS VPN과 AWS Direct Connect는 온프레미스 환경과 AWS 클라우드를 안전하게 연결하는 네트워크 서비스입니다. 각각 다른 사용 사례와 특성을 가집니다.

### 하이브리드 클라우드 연결이란?

온프레미스 데이터 센터와 AWS 클라우드를 연결하는 것입니다. 레거시 시스템과 클라우드를 통합하고, 데이터 마이그레이션을 수행하며, 하이브리드 아키텍처를 구축하고, 규정 준수 요구사항을 충족하기 위해 필요합니다.

### VPN 유형

#### 1. Site-to-Site VPN

Site-to-Site VPN은 온프레미스 네트워크와 VPC 간 연결을 제공합니다. 구성 요소는 Virtual Private Gateway (VGW)로 VPC에 연결하고, Customer Gateway (CGW)로 온프레미스에 연결하며, VPN 연결로 두 게이트웨이 간 터널을 생성합니다.

구조는 다음과 같습니다:

```
온프레미스 네트워크
  ↓
Customer Gateway (라우터/방화벽)
  ↓ (인터넷, 암호화)
Virtual Private Gateway
  ↓
VPC
```

Site-to-Site VPN은 지속적인 연결을 제공하며, 여러 터널을 지원하여 고가용성을 확보하고, 자동 장애 조치를 수행합니다.

#### 2. Client VPN

Client VPN은 개별 클라이언트와 VPC 간 연결을 제공합니다. 구성 요소는 Client VPN 엔드포인트로 클라이언트 소프트웨어를 사용자 디바이스에 설치합니다. 원격 작업자, 모바일 사용자, 임시 접근이 필요한 경우에 사용됩니다. 사용자별 인증을 제공하며, 세션별 연결을 지원하고 유연한 접근을 가능하게 합니다.

### VPN 프로토콜

#### IPsec (Internet Protocol Security)

IPsec은 네트워크 레벨에서 암호화하는 프로토콜입니다. 강력한 암호화를 제공하며, 인증 및 무결성을 보장하고, 표준 프로토콜을 사용합니다. Site-to-Site VPN이나 보안이 중요한 연결에 사용됩니다.

#### SSL/TLS

SSL/TLS는 애플리케이션 레벨에서 암호화하는 프로토콜입니다. 간단한 설정이 가능하고, 브라우저를 지원하며, 높은 호환성을 제공합니다. Client VPN이나 웹 기반 접근에 사용됩니다.

#### 다중 터널

```
온프레미스
  ↓
Customer Gateway
  ├── 터널 1 → Virtual Private Gateway (AZ A)
  └── 터널 2 → Virtual Private Gateway (AZ B)
```

다중 터널을 구성하면 단일 터널 장애 시 자동으로 전환되어 높은 가용성을 확보할 수 있고, 로드 밸런싱을 수행할 수 있습니다.

#### BGP (Border Gateway Protocol)

BGP는 동적 라우팅 프로토콜입니다. 자동 라우팅을 제공하며, 장애 시 자동으로 경로를 변경하고, 복잡한 네트워크에 적합합니다. 복잡한 온프레미스 네트워크나 다중 경로가 필요한 경우, 또는 동적 라우팅이 필요한 경우에 사용됩니다.

## AWS Direct Connect

온프레미스와 AWS 간 전용 네트워크 연결을 제공하는 서비스입니다. 전용 물리적 연결을 통해 높은 대역폭과 낮은 지연 시간을 제공하며, 일관된 성능을 보장합니다.

### Direct Connect 연결 유형

#### 1. 전용 연결 (Dedicated Connection)

전용 연결은 단일 고객 전용 물리적 연결입니다. 1, 10, 100 Gbps 속도를 제공하며, 직접 AWS와 계약하고 높은 비용이 발생합니다. 대규모 엔터프라이즈나 높은 대역폭이 필요한 경우, 또는 전용 연결이 필요한 경우에 사용됩니다.

#### 2. 호스팅 연결 (Hosted Connection)

호스팅 연결은 AWS 파트너를 통한 연결입니다. 50 Mbps ~ 10 Gbps 속도를 제공하며, 파트너를 통한 주문이 가능하고 낮은 비용이 발생합니다. 중소규모 기업이나 빠른 시작이 필요한 경우, 또는 낮은 비용이 필요한 경우에 사용됩니다.

## VPN vs Direct Connect 비교

### 비교표

| 항목          | VPN            | Direct Connect        |
| ------------- | -------------- | --------------------- |
| **연결**      | 인터넷 (가상)  | 전용 회선 (물리적)    |
| **대역폭**    | 최대 1.25 Gbps | 1 Gbps ~ 100 Gbps     |
| **지연 시간** | 높음 (인터넷)  | 낮음 (전용)           |
| **비용**      | 낮음           | 높음                  |
| **설정 시간** | 빠름 (분)      | 느림 (주~월)          |
| **가용성**    | 인터넷 의존    | 높음                  |
| **암호화**    | 필수           | 선택적 (VPN 오버레이) |

## VPN 오버레이

VPN 오버레이는 Direct Connect 위에 VPN 터널을 추가로 구성하는 것입니다. 추가 보안을 위해 이중 암호화를 제공하고, 트래픽을 분리하며, 규정 준수 요구사항을 충족합니다.
