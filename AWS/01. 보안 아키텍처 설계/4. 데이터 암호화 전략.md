# 데이터 암호화 전략

AWS에서 데이터를 보호하기 위한 암호화 전략은 저장 데이터 암호화와 전송 중 데이터 암호화로 구분됩니다.

### S3 암호화

S3는 여러 암호화 옵션을 제공합니다. SSE-S3는 AWS 관리형 키를 사용하며 무료입니다. SSE-KMS는 고객 관리형 키를 사용하여 키 사용을 제어할 수 있으며, 키 사용당 비용이 발생합니다. SSE-C는 고객 제공 키를 사용하며 키 관리 책임이 고객에게 있습니다. 클라이언트 측 암호화는 클라이언트에서 데이터를 암호화한 후 업로드하는 방식으로, 가장 높은 수준의 보안을 제공합니다. S3는 언제든지 버킷 정책으로 암호화를 강제할 수 있어 유연성이 높습니다.

### EBS 볼륨 암호화

EBS 볼륨은 기본 암호화를 활성화하면 새 볼륨이 자동으로 암호화됩니다. 특정 KMS CMK를 지정하여 사용할 수도 있습니다. 암호화된 볼륨의 스냅샷도 자동으로 암호화되며, 기존 볼륨은 스냅샷을 생성한 후 암호화된 볼륨으로 복원하는 방식으로 암호화할 수 있습니다.

### RDS 데이터베이스 암호화

RDS 데이터베이스는 생성 시에만 암호화를 활성화할 수 있으며, 생성 후에는 변경할 수 없습니다. 암호화된 스냅샷에서 복원하면 암호화가 적용되며, 읽기 전용 복제본은 원본과 동일한 암호화 키를 사용합니다. 따라서 데이터베이스 암호화를 고려한다면 처음부터 계획해야 합니다.

### DynamoDB 암호화

DynamoDB는 모든 테이블에 대해 기본 암호화를 제공하며 무료입니다. 더 세밀한 제어가 필요한 경우 KMS CMK를 사용할 수 있습니다.

### EFS 암호화

EFS(Elastic File System)는 파일 시스템 생성 시 기본 암호화를 활성화할 수 있으며, KMS CMK를 사용할 수 있습니다. EFS는 전송 중 암호화도 지원하여 TLS를 사용하여 데이터 전송 시에도 보안을 유지합니다.

## 전송 중 데이터 암호화

### TLS/SSL

웹 애플리케이션에서는 HTTPS를 사용하여 웹 트래픽을 암호화해야 합니다. 로드 밸런서는 SSL 종료를 지원하여 클라이언트와 로드 밸런서 간의 통신을 암호화하고, 로드 밸런서와 백엔드 서버 간의 통신은 VPC 내에서 이루어집니다. AWS 관리형 인증서는 자동으로 갱신되며, 자체 인증서를 ELB에 직접 업로드할 수도 있습니다.

### VPN

Site-to-Site VPN은 온프레미스 환경과 VPC 간의 암호화된 연결을 제공합니다. Client VPN은 개별 클라이언트와 VPC 간의 연결을 제공하여 원격 접근을 안전하게 할 수 있습니다. 온프레미스 환경과 AWS를 연결할 때는 VPN을 사용하는 것이 권장됩니다.

### Direct Connect

Direct Connect는 물리적 전용 회선을 제공하지만, 기본적으로 암호화되지 않습니다. 따라서 보안이 중요한 경우 VPN 오버레이를 사용하여 암호화를 추가하는 것이 권장됩니다.

### VPC 엔드포인트

VPC 엔드포인트는 PrivateLink를 통해 인터넷을 거치지 않고 AWS 서비스에 접근할 수 있게 합니다. 다만 VPC 내 트래픽은 기본적으로 암호화되지 않으므로, 필요에 따라 추가 암호화를 고려해야 합니다.

## 중요 개념 및 모범 사례

### 암호화 옵션 선택

S3 암호화 옵션을 선택할 때는 요구사항에 따라 결정해야 합니다. SSE-S3는 간단하고 무료이지만 키 관리가 불가능합니다. SSE-KMS는 키 관리 및 감사가 가능하지만 키 사용당 비용이 발생합니다. SSE-C는 최고 수준의 제어를 제공하지만 키 관리 책임이 고객에게 있습니다.

### 암호화 시점의 중요성

각 서비스별로 암호화를 활성화할 수 있는 시점이 다릅니다. RDS는 생성 시에만 암호화를 활성화할 수 있으며, 생성 후에는 변경할 수 없습니다. EBS는 스냅샷을 통해 기존 볼륨을 암호화할 수 있어 유연성이 높습니다. S3는 언제든지 버킷 정책으로 암호화를 강제할 수 있습니다. 따라서 모든 새 리소스에 암호화를 기본 활성화하고, S3의 경우 버킷 정책으로 암호화를 강제하는 것이 좋습니다.

### 전송 중 암호화 전략

웹 애플리케이션에서는 HTTPS를 필수로 사용해야 합니다. 온프레미스 환경과 연결할 때는 VPN을 사용하는 것이 권장되며, Direct Connect를 사용하는 경우 보안이 중요한 경우 VPN 오버레이로 암호화를 추가해야 합니다. 모든 외부 통신에 TLS를 사용하고, 내부 통신도 필요에 따라 암호화를 고려해야 합니다.

### 키 관리 전략

중요한 데이터는 CMK를 사용하여 키 관리 및 감사를 수행해야 합니다. 키 로테이션 정책을 수립하고, CloudTrail을 통해 키 사용을 정기적으로 감사해야 합니다. 키 사용 권한과 키 관리 권한을 분리하여 최소 권한 원칙을 적용하는 것이 좋습니다.

### 계층적 보안 구현

저장 암호화와 전송 암호화를 모두 적용하여 계층적 보안을 구현해야 합니다. 네트워크 보안(보안 그룹, NACL)과 액세스 제어(IAM)를 함께 사용하여 다층 방어를 구축합니다. 백업도 암호화해야 하며, 스냅샷과 백업 저장소를 암호화하고, 복원 시에도 암호화가 유지되도록 해야 합니다.

### 규정 준수 요구사항

다양한 규정 준수 요구사항을 충족해야 합니다. HIPAA는 암호화를 필수로 요구하며, PCI-DSS는 저장 및 전송 중 암호화를 모두 필수로 요구합니다. GDPR은 민감한 데이터에 대한 암호화를 권장합니다.
