# 데이터 암호화 전략

## 개요
AWS에서 데이터를 보호하기 위한 암호화 전략은 저장 데이터 암호화와 전송 중 데이터 암호화로 구분됩니다.

## 암호화 유형

### 1. 저장 데이터 암호화 (Encryption at Rest)
데이터가 저장소에 저장될 때 암호화

### 2. 전송 중 데이터 암호화 (Encryption in Transit)
데이터가 네트워크를 통해 전송될 때 암호화

## 저장 데이터 암호화

### S3 암호화
- **SSE-S3**: AWS 관리형 키, 무료
- **SSE-KMS**: 고객 관리형 키, 키 사용 제어 가능
- **SSE-C**: 고객 제공 키, 키 관리 책임
- **클라이언트 측 암호화**: 클라이언트에서 암호화 후 업로드

### EBS 볼륨 암호화
- **기본 암호화**: 새 볼륨 자동 암호화
- **CMK 지정**: 특정 KMS 키 사용
- **스냅샷**: 암호화된 볼륨의 스냅샷도 암호화
- **기존 볼륨**: 스냅샷을 통해 암호화 가능

### RDS 암호화
- **생성 시 암호화**: 데이터베이스 생성 시 활성화 (후에 변경 불가)
- **암호화된 스냅샷**: 암호화된 스냅샷에서 복원
- **읽기 전용 복제본**: 원본과 동일한 암호화 키 사용

### DynamoDB 암호화
- **기본 암호화**: 모든 테이블 자동 암호화 (무료)
- **KMS CMK**: 고객 관리형 키 사용 가능

### EFS 암호화
- **기본 암호화**: 파일 시스템 생성 시 활성화
- **KMS CMK**: 고객 관리형 키 사용 가능
- **전송 중 암호화**: TLS 사용

## 전송 중 데이터 암호화

### TLS/SSL
- **HTTPS**: 웹 트래픽 암호화
- **로드 밸런서**: SSL 종료 지원

### VPN
- **Site-to-Site VPN**: 온프레미스와 VPC 간 암호화된 연결
- **Client VPN**: 개별 클라이언트와 VPC 간 연결

### Direct Connect
- **전용 연결**: 물리적 전용 회선
- **암호화**: 기본적으로 암호화되지 않음 (VPN 오버레이 권장)

### VPC 엔드포인트
- **PrivateLink**: 인터넷을 거치지 않고 AWS 서비스 접근
- **VPC 내 트래픽**: 기본적으로 암호화되지 않음

## 시험 포인트

1. **암호화 옵션 선택**
   - **SSE-S3**: 간단하고 무료, 키 관리 불가
   - **SSE-KMS**: 키 관리 및 감사 가능, 비용 발생
   - **SSE-C**: 최고 수준의 제어, 키 관리 책임

2. **암호화 시점**
   - **RDS**: 생성 시에만 활성화 가능 (후에 변경 불가)
   - **EBS**: 스냅샷을 통해 기존 볼륨 암호화 가능
   - **S3**: 언제든지 버킷 정책으로 강제 가능

3. **전송 중 암호화**
   - **HTTPS**: 웹 애플리케이션 필수
   - **VPN**: 온프레미스 연결 시 권장
   - **Direct Connect**: VPN 오버레이로 암호화 추가

4. **인증서 관리**
   - **AWS 관리형 인증서**: 자동 갱신
   - **자체 인증서**: ELB에 직접 업로드 가능

5. **규정 준수**
   - **HIPAA**: 암호화 필수
   - **PCI-DSS**: 저장 및 전송 중 암호화 필수
   - **GDPR**: 민감 데이터 암호화 권장

## 모범 사례

1. **기본 암호화 활성화**
   - 모든 새 리소스에 암호화 기본 활성화
   - 버킷 정책으로 S3 암호화 강제

2. **키 관리**
   - 중요한 데이터는 CMK 사용
   - 키 로테이션 정책 수립
   - 키 사용 감사

3. **전송 중 암호화**
   - 모든 외부 통신에 TLS 사용
   - 내부 통신도 필요 시 암호화

4. **계층적 보안**
   - 저장 암호화 + 전송 암호화
   - 네트워크 보안 (보안 그룹, NACL)
   - 액세스 제어 (IAM)

5. **백업 암호화**
   - 스냅샷 암호화
   - 백업 저장소 암호화
   - 복원 시 암호화 유지

## 암호화 전략 예시

### 웹 애플리케이션
```
클라이언트 (HTTPS)
  ↓
ALB (SSL 종료)
  ↓
EC2 (VPC 내 통신)
  ↓
RDS (저장 데이터 암호화, KMS)
```

### 데이터 레이크
```
데이터 수집 (Kinesis, 전송 중 암호화)
  ↓
S3 (저장 데이터 암호화, SSE-KMS)
  ↓
데이터 처리 (처리 중 암호화)
  ↓
쿼리 결과 암호화
```

## 관련 서비스
- **KMS**: 암호화 키 관리
- **Secrets Manager**: 암호화된 시크릿 저장
- **CloudHSM**: 하드웨어 보안 모듈

## 참고 자료
- [AWS 암호화 모범 사례](https://docs.aws.amazon.com/security/latest/userguide/crypto.html)
- [S3 암호화](https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingEncryption.html)
- [EBS 암호화](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSEncryption.html)

