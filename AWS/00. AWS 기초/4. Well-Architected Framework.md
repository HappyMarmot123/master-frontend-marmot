# Well-Architected Framework

## 개요

AWS Well-Architected Framework는 클라우드 아키텍처를 설계하고 운영할 때 지켜야 할 5가지 핵심 원칙을 제공합니다. 쉽게 말해, AWS에서 시스템을 만들 때 "잘 만든 시스템"이 되기 위한 체크리스트라고 생각하면 됩니다.

마치 집을 지을 때 구조, 전기, 수도, 보안, 비용 등을 모두 고려하는 것처럼, AWS에서도 시스템을 만들 때 여러 측면을 고려해야 합니다. Well-Architected Framework는 그런 측면들을 5가지 기둥으로 정리한 것입니다.

## 5개 기둥 (Pillars)

### 1. 운영 우수성 (Operational Excellence)

운영 우수성은 시스템을 만들고 나서, 그 시스템을 잘 관리하고 지속적으로 개선하는 것을 의미합니다. 시스템이 제대로 작동하는지 모니터링하고, 문제가 생기면 빠르게 대응하며, 시간이 지나면서 더 나아지도록 개선하는 것입니다.

서버나 네트워크 같은 인프라를 코드로 작성해서 관리합니다.
반복되는 작업은 자동화합니다. 예를 들어, 코드를 배포하는 과정을 자동화하면 실수를 줄이고 시간을 절약할 수 있습니다.
시스템은 언제든 실패할 수 있습니다. 실패를 두려워하지 말고, 실패했을 때 어떻게 대응할지 미리 준비해야 합니다. 그리고 실패한 경험을 통해 더 나은 시스템을 만들어야 합니다.
서버가 다운되는 것을 비상 상황으로 생각하지 말고, 자동으로 복구되도록 설정하거나, 정기적으로 장애 상황을 시뮬레이션해서 대응 능력을 키워야 합니다.

**주요 서비스**

CloudFormation과 CDK는 인프라를 코드로 작성할 수 있게 해주는 서비스입니다. CloudWatch는 시스템을 모니터링하고 로그를 수집하는 서비스입니다. Systems Manager는 여러 서버를 중앙에서 관리할 수 있게 해주는 서비스입니다. CodePipeline과 CodeDeploy는 코드 배포를 자동화하는 서비스입니다.

### 2. 보안 (Security)

보안이 제대로 되어 있지 않으면, 해커가 시스템에 침입해서 데이터를 훔치거나 시스템을 망가뜨릴 수 있습니다. 또는 실수로 중요한 데이터가 공개되어서 큰 문제가 될 수 있습니다. 보안은 시스템을 만들 때 가장 먼저 고려해야 할 사항입니다.

보안은 한 곳에만 적용하는 것이 아니라, 모든 곳에 적용해야 합니다. 네트워크, 서버, 애플리케이션, 데이터 등 모든 계층에서 보안을 적용해야 합니다.
필요한 최소한의 권한만 부여합니다. 권한이 많을수록 보안 위험이 커집니다.
무엇을 했는지 기록해야 합니다. 문제가 생겼을 때 누가 했는지 알 수 있어야 하고, 보안 위협을 탐지할 수 있어야 합니다.
새로운 서버를 만들 때마다 자동으로 보안 패치를 설치하거나, 보안 그룹을 자동으로 설정하도록 합니다.
저장된 데이터는 암호화하고, 전송 중인 데이터도 암호화합니다.

**주요 서비스**

IAM과 IAM Identity Center는 누가 시스템에 접근할 수 있는지 관리하는 서비스입니다. KMS와 Secrets Manager는 암호화와 비밀 정보 관리를 담당합니다. Shield와 WAF는 DDoS 공격이나 웹 공격으로부터 시스템을 보호합니다. GuardDuty는 위협을 자동으로 탐지하고, CloudTrail과 Config는 모든 활동을 기록하고 추적합니다.

### 3. 안정성 (Reliability)

안정성은 시스템이 예상대로 작동하고, 문제가 생겨도 빠르게 복구할 수 있는 능력을 의미합니다. 서버가 다운되거나 네트워크에 문제가 생겨도, 시스템이 계속 작동하거나 빠르게 복구되어야 합니다.

문제가 생겼을 때 어떻게 복구할지 미리 계획하고 테스트해야 합니다. 실제로 문제가 생기기 전에, 장애 상황을 시뮬레이션해서 복구 절차가 제대로 작동하는지 확인해야 합니다. 예를 들어, 서버를 의도적으로 중지시켜서 다른 서버로 자동으로 전환되는지 테스트할 수 있습니다.
서버가 다운되면 사람이 개입하지 않아도 자동으로 새로운 서버를 시작하거나, 다른 서버로 트래픽을 전환하도록 설정합니다. Auto Scaling은 서버가 다운되면 자동으로 새로운 서버를 시작해줍니다.
서버를 더 많이 추가해서 부하를 분산시킵니다. 한 대의 강력한 서버보다, 여러 대의 서버를 사용하는 것이 안정적입니다. 한 서버가 다운되어도 다른 서버들이 계속 작동하기 때문입니다.
시스템이 얼마나 많은 부하를 견딜 수 있는지 알고, 필요에 따라 용량을 조정해야 합니다. 예를 들어, 특정 시간에 트래픽이 급증한다면 그 시간에 맞춰서 서버를 미리 늘려놓아야 합니다.

**주요 서비스**

Auto Scaling은 서버 수를 자동으로 조정하는 서비스입니다. ELB(Elastic Load Balancer)는 여러 서버에 트래픽을 분산시켜주는 서비스입니다. Route 53은 DNS 서비스로, 한 서버가 다운되면 다른 서버로 자동으로 전환시켜줍니다. Multi-AZ 배포는 여러 가용 영역에 서버를 배치해서 한 영역에 문제가 생겨도 다른 영역에서 계속 서비스를 제공할 수 있게 해줍니다. 백업 및 복구 솔루션은 데이터를 안전하게 보관하고 필요할 때 복구할 수 있게 해줍니다.

### 4. 성능 효율성 (Performance Efficiency)

성능 효율성은 시스템이 빠르게 작동하면서도 리소스를 효율적으로 사용하는 것을 의미합니다. 같은 작업을 하는데 더 적은 리소스를 사용하거나, 같은 리소스로 더 많은 작업을 할 수 있도록 최적화하는 것입니다.

한 가지 기술에만 의존하지 말고, 상황에 맞는 기술을 선택할 수 있어야 합니다. 관계형 데이터베이스가 적합한 경우도 있고, NoSQL 데이터베이스가 적합한 경우도 있습니다. 워크로드에 따라 적절한 기술을 선택해야 합니다.
전 세계 사용자에게 서비스를 제공한다면, 각 지역에 가까운 서버를 배치해야 합니다.
서버를 관리하지 않고도 애플리케이션을 실행할 수 있는 서버리스 기술을 활용합니다.

**주요 서비스**

CloudFront는 전 세계에 콘텐츠를 분산시켜서 사용자에게 빠르게 전달하는 CDN 서비스입니다. Auto Scaling은 부하에 따라 자동으로 서버를 조정해서 필요한 만큼만 리소스를 사용합니다. ElastiCache는 자주 사용하는 데이터를 메모리에 저장해서 빠르게 접근할 수 있게 해주는 캐시 서비스입니다. 읽기 전용 복제본은 데이터베이스의 읽기 부하를 분산시켜서 성능을 향상시킵니다. Lambda와 Fargate는 서버리스 컴퓨팅 서비스로, 서버 관리 없이도 애플리케이션을 실행할 수 있습니다.

### 5. 비용 최적화 (Cost Optimization)

클라우드는 사용한 만큼만 지불하는 모델이지만, 잘못 사용하면 불필요한 비용이 발생할 수 있습니다. 예를 들어, 사용하지 않는 서버를 계속 실행하거나, 너무 큰 서버를 사용하거나, 데이터를 비효율적으로 저장하면 불필요한 비용이 발생합니다. 비용을 최적화하면 같은 예산으로 더 많은 것을 할 수 있습니다.

사용하지 않는 서버, 스토리지, 네트워크 리소스를 정기적으로 확인하고 제거해야 합니다.
간헐적으로 사용하는 워크로드에는 온디맨드 인스턴스를 사용하고, 장기적으로 사용하는 워크로드에는 예약형 인스턴스나 Savings Plans를 사용하면 비용을 절약할 수 있습니다.
데이터를 전송할 때도 비용이 발생합니다. 예를 들어, S3에서 인터넷으로 데이터를 전송하면 비용이 발생합니다.

**주요 서비스**

Cost Explorer와 Budgets는 비용을 분석하고 예산을 관리하는 서비스입니다. 예약형 인스턴스와 Savings Plans는 장기 약정을 통해 최대 72%까지 비용을 절약할 수 있는 구매 옵션입니다. 스팟 인스턴스는 미사용 용량을 할인된 가격에 사용할 수 있어서 최대 90%까지 비용을 절약할 수 있습니다. S3 수명 주기 관리는 자주 사용하지 않는 데이터를 저렴한 스토리지 클래스로 자동으로 이동시켜서 비용을 절약합니다. Auto Scaling은 필요한 만큼만 리소스를 사용하도록 해서 비용을 최적화합니다.

---

**트레이드오프 예시**

보안과 비용 최적화 사이에는 트레이드오프가 있을 수 있습니다. 예를 들어, 모든 데이터를 암호화하고 여러 보안 서비스를 사용하면 비용이 증가합니다. 하지만 보안이 중요한 경우에는 비용보다 보안을 우선시해야 합니다.

성능과 비용 사이에도 트레이드오프가 있습니다. 예를 들어, 더 빠른 서버를 사용하면 비용이 증가합니다. 하지만 성능이 중요한 경우에는 비용을 지불하고 더 나은 성능을 선택해야 합니다.

안정성과 복잡성 사이에도 트레이드오프가 있습니다. 예를 들어, Multi-AZ 배포나 여러 리전에 배포하면 안정성이 높아지지만, 시스템이 복잡해집니다. 하지만 중요한 시스템이라면 복잡성을 감수하고 안정성을 높여야 합니다.
