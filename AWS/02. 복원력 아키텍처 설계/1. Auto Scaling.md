# Auto Scaling

## 개요
Auto Scaling은 애플리케이션 수요에 따라 자동으로 컴퓨팅 용량을 조정하는 서비스입니다. 고가용성과 비용 최적화를 동시에 달성할 수 있습니다.

## 핵심 개념

### 확장 유형

#### 1. 수평 확장 (Horizontal Scaling)
- **정의**: 인스턴스 수를 늘리거나 줄이는 것
- **특징**:
  - 스케일 아웃 (Scale Out): 인스턴스 추가
  - 스케일 인 (Scale In): 인스턴스 제거
  - 무중단 확장 가능
  - Auto Scaling Group에서 사용

#### 2. 수직 확장 (Vertical Scaling)
- **정의**: 인스턴스의 사양을 늘리거나 줄이는 것
- **특징**:
  - 스케일 업 (Scale Up): 더 큰 인스턴스 유형으로 변경
  - 스케일 다운 (Scale Down): 더 작은 인스턴스 유형으로 변경
  - 다운타임 발생 (인스턴스 재시작 필요)
  - 수동 또는 스크립트로 수행

### Auto Scaling 구성 요소

#### 1. Launch Template / Launch Configuration
- **정의**: 새 인스턴스를 시작하는 데 사용되는 설정
- **포함 내용**:
  - AMI ID
  - 인스턴스 유형
  - 보안 그룹
  - IAM 역할
  - 사용자 데이터

#### 2. Auto Scaling Group (ASG)
- **정의**: 함께 관리되는 EC2 인스턴스 그룹
- **설정**:
  - 최소 크기 (Min Size)
  - 최대 크기 (Max Size)
  - 원하는 용량 (Desired Capacity)
  - 가용 영역 분산

#### 3. 스케일링 정책
- **대상 추적 (Target Tracking)**: 특정 지표를 목표 값으로 유지
- **단계 조정 (Step Scaling)**: 지표 값에 따라 단계별 조정
- **간단 조정 (Simple Scaling)**: 단일 조정 작업

### 스케일링 트리거

#### 1. CloudWatch 지표 기반
- CPU 사용률
- 네트워크 인/아웃
- 커스텀 지표

#### 2. 일정 기반 (Scheduled Scaling)
- 특정 시간에 용량 조정
- 예: 업무 시간에 용량 증가

#### 3. 예측 확장 (Predictive Scaling)
- 머신러닝을 통한 수요 예측
- 미리 용량 조정

## 사용 사례

### 1. 웹 애플리케이션
- 트래픽 증가 시 인스턴스 자동 추가
- 트래픽 감소 시 인스턴스 자동 제거
- 비용 최적화

### 2. 배치 작업
- 작업 시작 시 인스턴스 추가
- 작업 완료 시 인스턴스 제거
- 스팟 인스턴스와 함께 사용

### 3. 고가용성
- 여러 가용 영역에 인스턴스 분산
- 장애 발생 시 자동 교체

## 시험 포인트

1. **수평 vs 수직 확장**
   - **수평**: 무중단, Auto Scaling 사용
   - **수직**: 다운타임 발생, 수동 작업

2. **ASG 설정**
   - 최소 크기: 항상 유지할 인스턴스 수
   - 최대 크기: 최대 인스턴스 수
   - 원하는 용량: 목표 인스턴스 수

3. **Health Check**
   - EC2 상태 확인: 인스턴스가 실행 중인지 확인
   - ELB 상태 확인: ELB가 정상으로 판단하는 인스턴스만 유지
   - 비정상 인스턴스 자동 교체

4. **스케일링 정책**
   - **대상 추적**: 가장 간단, CPU 70% 유지 등
   - **단계 조정**: 세밀한 제어, 여러 임계값 설정
   - **간단 조정**: 단일 임계값, 쿨다운 기간 필요

5. **쿨다운 (Cooldown)**
   - 스케일링 작업 후 대기 시간
   - 연속 스케일링 방지
   - 대상 추적은 쿨다운 불필요

## 모범 사례

1. **다중 가용 영역**
   - 최소 2개 이상의 AZ에 인스턴스 분산
   - 고가용성 확보

2. **Health Check 설정**
   - ELB Health Check 사용 권장
   - 애플리케이션 레벨 상태 확인

3. **스케일링 정책 최적화**
   - 대상 추적 정책 우선 사용
   - 적절한 임계값 설정 (너무 민감하지 않게)

4. **Launch Template 사용**
   - Launch Configuration 대신 Launch Template 사용
   - 버전 관리 및 부분 업데이트 가능

5. **생명주기 훅 (Lifecycle Hooks)**
   - 인스턴스 시작/종료 시 커스텀 작업 수행
   - 애플리케이션 준비 시간 확보

## 관련 서비스
- **EC2**: Auto Scaling 대상
- **ELB**: 트래픽 분산 및 Health Check
- **CloudWatch**: 스케일링 지표 모니터링
- **Launch Template**: 인스턴스 시작 설정

## 참고 자료
- [Auto Scaling 공식 문서](https://docs.aws.amazon.com/autoscaling/)
- [Auto Scaling 모범 사례](https://docs.aws.amazon.com/autoscaling/ec2/userguide/auto-scaling-best-practices.html)

