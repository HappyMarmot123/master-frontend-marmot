# Route 53

## 개요
Amazon Route 53은 고가용성이고 확장 가능한 클라우드 DNS 웹 서비스입니다. 도메인 이름을 IP 주소로 변환하고 트래픽을 라우팅합니다.

## 핵심 개념

### DNS 기본
- **도메인 이름**: 사람이 읽을 수 있는 주소 (예: example.com)
- **IP 주소**: 컴퓨터가 사용하는 주소 (예: 192.0.2.1)
- **DNS 조회**: 도메인 이름을 IP 주소로 변환

### 레코드 유형

#### 1. 기본 레코드
- **A**: IPv4 주소
- **AAAA**: IPv6 주소
- **CNAME**: 다른 도메인 이름으로 별칭
- **MX**: 메일 서버
- **TXT**: 텍스트 정보

#### 2. 라우팅 레코드
- **Weighted**: 가중치 기반 라우팅
- **Latency**: 지연 시간 기반 라우팅
- **Failover**: 장애 조치 라우팅
- **Geolocation**: 지리적 위치 기반 라우팅
- **Geoproximity**: 지리적 근접성 기반 라우팅
- **Multivalue**: 다중 값 라우팅

## 주요 기능

### 1. Health Check
- **정의**: 리소스의 상태를 주기적으로 확인
- **확인 방법**: HTTP, HTTPS, TCP
- **사용 사례**: 장애 조치, 모니터링

### 2. 장애 조치 (Failover)
- **Active-Passive**: Primary 실패 시 Secondary로 전환
- **Active-Active**: 여러 리소스에 트래픽 분산
- **Health Check 기반**: 자동 장애 조치

### 3. 가중치 라우팅
- **목적**: A/B 테스트, 점진적 배포
- **방법**: 레코드에 가중치 할당
- **예시**: 90% 트래픽을 새 버전으로, 10%를 기존 버전으로

### 4. 지연 시간 기반 라우팅
- **목적**: 가장 낮은 지연 시간의 리소스로 라우팅
- **방법**: 사용자 위치 기반 최적 엔드포인트 선택
- **사용 사례**: 글로벌 애플리케이션

### 5. 지리적 위치 라우팅
- **목적**: 사용자 위치에 따라 다른 콘텐츠 제공
- **방법**: 국가/대륙별 레코드 설정
- **사용 사례**: 지역별 콘텐츠, 규정 준수

## 사용 사례

### 1. 도메인 등록 및 관리
- 도메인 이름 등록
- DNS 레코드 관리
- 도메인 이전

### 2. 고가용성 구성
- Health Check 기반 장애 조치
- 여러 리전에 리소스 배포
- 자동 장애 조치

### 3. 로드 밸런싱
- 가중치 기반 트래픽 분산
- 지연 시간 기반 최적 엔드포인트 선택
- 지리적 위치 기반 라우팅

### 4. 하이브리드 클라우드
- 온프레미스와 클라우드 리소스 통합
- VPN 또는 Direct Connect와 함께 사용

## 시험 포인트

1. **레코드 TTL**
   - **TTL (Time To Live)**: DNS 레코드 캐시 시간
   - 짧은 TTL: 빠른 변경, 높은 비용
   - 긴 TTL: 느린 변경, 낮은 비용

2. **Health Check**
   - **간격**: 30초 (표준), 10초 (빠른)
   - **실패 임계값**: 연속 실패 횟수
   - **비용**: Health Check당 비용 발생

3. **Alias 레코드**
   - **특징**: AWS 리소스에 대한 별칭
   - **장점**: 무료, 자동으로 IP 주소 업데이트
   - **대상**: ALB, CloudFront, S3, Elastic Beanstalk

4. **장애 조치 전략**
   - **Active-Passive**: Primary 실패 시 Secondary
   - **Active-Active**: 여러 리소스에 분산
   - **Health Check 필수**: 자동 장애 조치

5. **비용**
   - 호스팅 영역: 월 $0.50
   - 쿼리: 100만 쿼리당 $0.40
   - Health Check: 체크당 비용

## 모범 사례

1. **고가용성**
   - 최소 2개 이상의 리소스 배포
   - Health Check 활성화
   - 여러 리전 활용

2. **성능**
   - Alias 레코드 사용 (AWS 리소스)
   - 지연 시간 기반 라우팅
   - CloudFront와 함께 사용

3. **보안**
   - DNSSEC 활성화
   - Private Hosted Zone (VPC 내부)
   - IAM 정책으로 액세스 제어

4. **비용 최적화**
   - 적절한 TTL 설정
   - Health Check 최소화
   - Alias 레코드 사용

5. **모니터링**
   - CloudWatch 지표 모니터링
   - Health Check 상태 확인
   - 쿼리 로그 분석

## Route 53 아키텍처 예시

### Active-Passive 장애 조치
```
Primary Region (서울)
  - Health Check: 정상
  - Route 53: Primary로 라우팅
  
Secondary Region (도쿄)
  - Health Check: 대기
  - Primary 실패 시 자동 전환
```

### 가중치 라우팅
```
버전 A (가중치: 90)
  - 새 버전
  - 90% 트래픽
  
버전 B (가중치: 10)
  - 기존 버전
  - 10% 트래픽
```

## 관련 서비스
- **CloudFront**: CDN (Route 53과 함께 사용)
- **ELB**: 로드 밸런서 (Alias 레코드)
- **S3**: 정적 웹사이트 호스팅
- **EC2**: 인스턴스 (A 레코드)

## 참고 자료
- [Route 53 공식 문서](https://docs.aws.amazon.com/route53/)
- [Route 53 라우팅 정책](https://docs.aws.amazon.com/route53/latest/developerguide/routing-policy.html)
- [Health Check](https://docs.aws.amazon.com/route53/latest/developerguide/health-checks.html)

